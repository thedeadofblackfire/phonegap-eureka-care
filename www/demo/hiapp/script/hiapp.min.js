(function(){window.Framework7=function(t){function o(e){var t=e.replace(/^./,function(e){return e.toUpperCase()});n["onPage"+t]=function(t,r){return n.onPage(e,t,r)}}function f(e,t,r){t=i(t);var s=t.find(e);return s.length>1&&(typeof r.selector=="string"&&(s=t.find(r.selector+" "+e)),s.length>1&&(s=t.find("."+n.params.viewMainClass+" "+e))),s.length===1?s:undefined}function l(e,t,n,r){n==="to-left"&&(e.removeClass("page-on-center").addClass("page-from-center-to-left"),t.addClass("page-from-right-to-center")),n==="to-right"&&(e.removeClass("page-on-left").addClass("page-from-left-to-center"),t.removeClass("page-on-center").addClass("page-from-center-to-right"))}function c(e,t,r,s){r==="to-left"&&(t.removeClass("navbar-on-right").addClass("navbar-from-right-to-center"),t.find(".sliding").each(function(){var e=i(this);e.transform("translate3d(0px,0,0)"),n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),e.removeClass("navbar-on-center").addClass("navbar-from-center-to-left"),e.find(".sliding").each(function(){var e=i(this);n.params.animateNavBackIcon&&(e.hasClass("center")&&t.find(".sliding.left .back .icon").length>0&&(this.f7NavbarLeftOffset+=t.find(".sliding.left .back span")[0].offsetLeft),e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+ -this.f7NavbarLeftOffset+"px,0,0)")),e.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")})),r==="to-right"&&(e.removeClass("navbar-on-left").addClass("navbar-from-left-to-center"),e.find(".sliding").each(function(){var e=i(this);e.transform("translate3d(0px,0,0)"),n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),t.removeClass("navbar-on-center").addClass("navbar-from-center-to-right"),t.find(".sliding").each(function(){var e=i(this);n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+ -this.f7NavbarRightOffset+"px,0,0)"),e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)")}))}function h(e,t,r,s){function E(){e.allowPageChange=!0,a.removeClass("page-from-right-to-center page-on-right").addClass("page-on-center"),h.removeClass("page-from-center-to-left page-on-center").addClass("page-on-left"),y&&(m.removeClass("navbar-from-right-to-center navbar-on-right").addClass("navbar-on-center"),v.removeClass("navbar-from-center-to-left navbar-on-center").addClass("navbar-on-left")),n.pageAnimCallbacks("after",e,{pageContainer:a[0],url:t,position:"right",oldPage:h,newPage:a}),n.params.pushState&&n.pushStateClearQueue()}var o=i(e.container),u=i(e.pagesContainer),a,h,p,d,v,m,g,y;typeof s=="undefined"&&(s=e.params.animatePages),n.pluginHook("loadPage",e,t,r),n._tempDomElement.innerHTML="";if(t||typeof r=="string")n._tempDomElement.innerHTML=r;else if("length"in r&&r.length>1)for(var b=0;b<r.length;b++)i(n._tempDomElement).append(r[b]);else i(n._tempDomElement).append(r);a=f(".page",n._tempDomElement,e);if(!a){e.allowPageChange=!0;return}a.addClass("page-on-right"),p=u.children(".page:not(.cached)");if(p.length>1){for(d=0;d<p.length-2;d++)e.params.domCache?i(p[d]).addClass("cached"):(n.pageRemoveCallback(e,p[d],"left"),i(p[d]).remove());e.params.domCache?i(p[d]).addClass("cached"):(n.pageRemoveCallback(e,p[d],"left"),i(p[d]).remove())}h=u.children(".page:not(.cached)");if(e.params.dynamicNavbar){y=!0,m=f(".navbar-inner",n._tempDomElement,e),m||(y=!1),g=o.find(".navbar"),v=g.find(".navbar-inner:not(.cached)");if(v.length>0){for(d=0;d<v.length-1;d++)e.params.domCache?i(v[d]).addClass("cached"):i(v[d]).remove();!m&&v.length===1&&(e.params.domCache?i(v[0]).addClass("cached"):i(v[0]).remove()),v=g.find(".navbar-inner:not(.cached)")}}y&&(m.addClass("navbar-on-right"),g.append(m[0])),t||(t="#content-"+e.history.length,e.params.domCache||(e.history.length===1&&(e.contentCache[e.history[0]]={nav:v,page:h}),e.contentCache[t]={nav:m,page:a})),e.url=t,e.history.push(t),u.append(a[0]),n.pageInitCallback(e,a[0],t,"right",y?m[0]:undefined),y&&n.navbarInitCallback(e,a[0],g[0],m[0],t,"right"),y&&s&&m.find(".sliding").each(function(){var e=i(this);e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)"),n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+ -this.f7NavbarRightOffset+"px,0,0)")});var w=a[0].clientLeft;n.pageAnimCallbacks("before",e,{pageContainer:a[0],url:t,position:"right",oldPage:h,newPage:a}),s?(l(h,a,"to-left",e),y&&setTimeout(function(){c(v,m,"to-left",e)},0),a.animationEnd(function(e){E()})):E()}function p(e,t,r){n.pluginHook("preprocess",e,t,r),e=n.pluginProcess("preprocess",e),n.params.preprocess?(e=n.params.preprocess(e,t,r),typeof e!="undefined"&&r(e)):r(e)}function d(){n.device.ipad&&(document.body.scrollLeft=0,setTimeout(function(){document.body.scrollLeft=0},0))}function m(){var e=this,t=e.scrollTop,n=e.scrollHeight,r=e.offsetHeight,s=e.getAttribute("data-distance");s||(s=50),typeof s=="string"&&s.indexOf("%")>=0&&(s=parseInt(s,10)/100*r),s>r&&(s=r),t+r>=n-s&&i(e).trigger("infinite")}var n=this;n.version="0.9.5",n.params={cache:!0,cacheIgnore:[],cacheIgnoreGetParameters:!1,cacheDuration:6e5,preloadPreviousPage:!0,pushState:!1,pushStateRoot:undefined,pushStateNoAnimation:!1,pushStateSeparator:"#!/",fastClicks:!0,animateNavBackIcon:!1,swipeBackPage:!0,swipeBackPageThreshold:0,swipeBackPageActiveArea:30,swipeBackPageBoxShadow:!0,ajaxLinks:undefined,externalLinks:["external"],sortable:!0,swipeout:!0,swipeoutNoFollow:!1,smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>',smartSelectBackText:"Back",smartSelectSearchbar:!1,smartSelectBackOnSelect:!1,searchbarHideDividers:!0,searchbarHideGroups:!0,swipePanel:!1,swipePanelActiveArea:0,swipePanelCloseOpposite:!0,swipePanelNoFollow:!1,swipePanelThreshold:0,panelsCloseByOutside:!0,modalTemplate:'<div class="modal {{noButtons}}"><div class="modal-inner">{{if title}}<div class="modal-title">{{title}}</div>{{/if title}}<div class="modal-text">{{text}}</div>{{afterText}}</div><div class="modal-buttons">{{buttons}}</div></div>',modalActionsTemplate:'<div class="actions-modal">{{buttons}}</div>',modalButtonOk:"OK",modalButtonCancel:"Cancel",modalUsernamePlaceholder:"Username",modalPasswordPlaceholder:"Password",modalTitle:"Framework7",modalCloseByOutside:!1,actionsCloseByOutside:!0,popupCloseByOutside:!0,modalPreloaderTitle:"Loading... ",init:!0,viewClass:"view",viewMainClass:"view-main",viewsClass:"views",notificationCloseOnClick:!1,notificationCloseIcon:!0,animatePages:!0};for(var r in t)n.params[r]=t[r];var i=e;n.touchEvents={start:n.support.touch?"touchstart":"mousedown",move:n.support.touch?"touchmove":"mousemove",end:n.support.touch?"touchend":"mouseup"},n.ls=localStorage,n.rtl=i("body").css("direction")==="rtl",n.rtl&&i("html").attr("dir","rtl"),typeof n.params.statusbarOverlay!="undefined"&&(n.params.statusbarOverlay?i("html").addClass("with-statusbar-overlay"):i("html").removeClass("with-statusbar-overlay")),n.views=[];var s=function(e,t){var r={dynamicNavbar:!1,domCache:!1,linksView:undefined,swipeBackPage:n.params.swipeBackPage,swipeBackPageBoxShadow:n.params.swipeBackPageBoxShadow,swipeBackPageActiveArea:n.params.swipeBackPageActiveArea,swipeBackPageThreshold:n.params.swipeBackPageThreshold,animatePages:n.params.animatePages};t=t||{};for(var s in r)typeof t[s]=="undefined"&&(t[s]=r[s]);var o=this;o.params=t,o.selector=e;var u=i(e);o.container=u[0];var a=document.location.href;o.history=[];var f=a,l=n.params.pushStateSeparator,c=n.params.pushStateRoot;n.params.pushState&&(c?f=c:f.indexOf(l)>=0&&f.indexOf(l+"#")<0&&(f=f.split(l)[0])),o.url=u.attr("data-url")||o.params.url||f,o.url&&o.history.push(o.url),o.contentCache={},u[0].f7View=o,o.pagesContainer=u.find(".pages")[0],o.allowPageChange=!0;if(!o.activePage){var h=i(o.pagesContainer).find(".page-on-center"),p;h.length===0&&(h=i(o.pagesContainer).find(".page"),h=h.eq(h.length-1)),h.length>0&&(p=h[0].f7PageData),p&&(p.view=o,o.url&&(p.url=o.url),o.activePage=p,h[0].f7PageData=p)}o.main=u.hasClass(n.params.viewMainClass);var d=!1,v=!1,m={},g,y,b,w,E,S=!0,x,T,N,C,k,L,A,O,M;o.handleTouchStart=function(e){if(!S||!o.params.swipeBackPage||d||n.swipeoutOpenedEl)return;v=!1,d=!0,g=undefined,m.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,m.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY,x=(new Date).getTime(),O=o.params.dynamicNavbar&&u.find(".navbar-inner").length>1},o.handleTouchMove=function(e){if(!d)return;var t=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX,r=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;typeof g=="undefined"&&(g=!!(g||Math.abs(r-m.y)>Math.abs(t-m.x)));if(g||e.f7PreventSwipeBack){d=!1;return}e.f7PreventPanelSwipe=!0;if(!v){var s=!1;w=u.width();var a=i(e.target);y=a.is(".page")?a:a.parents(".page"),y.hasClass("no-swipeback")&&(s=!0),b=u.find(".page-on-left:not(.cached)");var f=m.x-u.offset().left>o.params.swipeBackPageActiveArea;n.rtl?f=m.x<u.offset().left-u[0].scrollLeft+w-o.params.swipeBackPageActiveArea:f=m.x-u.offset().left>o.params.swipeBackPageActiveArea,f&&(s=!0);if(b.length===0||y.length===0)s=!0;if(s){d=!1;return}O&&(T=u.find(".navbar-on-center:not(.cached)"),N=u.find(".navbar-on-left:not(.cached)"),C=T.find(".left, .center, .right"),k=N.find(".left, .center, .right"),n.params.animateNavBackIcon&&(L=T.find(".left.sliding .back .icon"),A=N.find(".left.sliding .back .icon")))}v=!0,e.preventDefault();var l=n.rtl?-1:1;E=(t-m.x-o.params.swipeBackPageThreshold)*l,E<0&&(E=0);var c=E/w,h={percentage:c,activePage:y[0],previousPage:b[0],activeNavbar:T[0],previousNavbar:N[0]};o.params.onSwipeBackMove&&o.params.onSwipeBackMove(h),u.trigger("swipebackmove",h);var p=E*l,S=(E/5-w/5)*l;n.device.pixelRatio===1&&(p=Math.round(p),S=Math.round(S)),y.transform("translate3d("+p+"px,0,0)"),o.params.swipeBackPageBoxShadow&&n.device.os!=="android"&&(y[0].style.boxShadow="0px 0px 12px rgba(0,0,0,"+(.5-.5*c)+")"),b.transform("translate3d("+S+"px,0,0)"),b[0].style.opacity=.9+.1*c;if(O){var x;for(x=0;x<C.length;x++){M=i(C[x]),M[0].style.opacity=1-c*1.3;if(M[0].className.indexOf("sliding")>=0){var _=c*M[0].f7NavbarRightOffset;n.device.pixelRatio===1&&(_=Math.round(_)),M.transform("translate3d("+_+"px,0,0)"),n.params.animateNavBackIcon&&M[0].className.indexOf("left")>=0&&L.length>0&&L.transform("translate3d("+ -_+"px,0,0)")}}for(x=0;x<k.length;x++){M=i(k[x]),M[0].style.opacity=c*1.3-.3;if(M[0].className.indexOf("sliding")>=0){var D=M[0].f7NavbarLeftOffset*(1-c);n.device.pixelRatio===1&&(D=Math.round(D)),M.transform("translate3d("+D+"px,0,0)"),n.params.animateNavBackIcon&&M[0].className.indexOf("left")>=0&&A.length>0&&A.transform("translate3d("+ -D+"px,0,0)")}}}},o.handleTouchEnd=function(e){if(!d||!v){d=!1,v=!1;return}d=!1,v=!1;if(E===0){i([y[0],b[0]]).transform("").css({opacity:"",boxShadow:""}),O&&(C.transform("").css({opacity:""}),k.transform("").css({opacity:""}),L&&L.length>0&&L.transform(""),A&&L.length>0&&A.transform(""));return}var t=(new Date).getTime()-x,r=!1;if(t<300&&E>10||t>=300&&E>w/2)y.removeClass("page-on-center").addClass("page-on-right"),b.removeClass("page-on-left").addClass("page-on-center"),O&&(T.removeClass("navbar-on-center").addClass("navbar-on-right"),N.removeClass("navbar-on-left").addClass("navbar-on-center")),r=!0;i([y[0],b[0]]).transform("").css({opacity:"",boxShadow:""}).addClass("page-transitioning"),O&&(C.css({opacity:""}).each(function(){var e=r?this.f7NavbarRightOffset:0,t=i(this);t.transform("translate3d("+e+"px,0,0)"),n.params.animateNavBackIcon&&t.hasClass("left")&&L.length>0&&L.addClass("page-transitioning").transform("translate3d("+ -e+"px,0,0)")}).addClass("page-transitioning"),k.transform("").css({opacity:""}).each(function(){var e=r?0:this.f7NavbarLeftOffset,t=i(this);t.transform("translate3d("+e+"px,0,0)"),n.params.animateNavBackIcon&&t.hasClass("left")&&A.length>0&&A.addClass("page-transitioning").transform("translate3d("+ -e+"px,0,0)")}).addClass("page-transitioning")),S=!1,o.allowPageChange=!1;if(r){var s=o.history[o.history.length-2];o.url=s,n.pageAnimCallbacks("before",o,{pageContainer:b[0],url:s,position:"left",newPage:b,oldPage:y,swipeBack:!0})}y.transitionEnd(function(){i([y[0],b[0]]).removeClass("page-transitioning"),O&&(C.removeClass("page-transitioning").css({opacity:""}),k.removeClass("page-transitioning").css({opacity:""}),L&&L.length>0&&L.removeClass("page-transitioning"),A&&A.length>0&&A.removeClass("page-transitioning")),S=!0,o.allowPageChange=!0,r&&(n.params.pushState&&history.back(),n.pageAnimCallbacks("after",o,{pageContainer:b[0],url:s,position:"left",newPage:b,oldPage:y,swipeBack:!0}),n.afterGoBack(o,y,b))})},o.attachEvents=function(e){var t=e?"off":"on";u[t](n.touchEvents.start,o.handleTouchStart),u[t](n.touchEvents.move,o.handleTouchMove),u[t](n.touchEvents.end,o.handleTouchEnd)},o.detachEvents=function(){o.attachEvents(!0)},o.params.swipeBackPage&&o.attachEvents(),n.views.push(o),o.main&&(n.mainView=o),o.loadPage=function(e,t){return n.loadPage(o,e,t)},o.loadContent=function(e,t){return n.loadContent(o,e,t)},o.goBack=function(e,t){return n.goBack(o,e,t)},o.hideNavbar=function(){return n.hideNavbar(u)},o.showNavbar=function(){return n.showNavbar(u)},o.hideToolbar=function(){return n.hideToolbar(u)},o.showToolbar=function(){return n.showToolbar(u)};if(n.params.pushState&&o.main){var _;c?_=a.split(n.params.pushStateRoot+l)[1]:a.indexOf(l)>=0&&a.indexOf(l+"#")<0&&(_=a.split(l)[1]);var D;n.params.pushStateNoAnimation===!0&&(D=!1),_&&n.loadPage(o,_,D,!1)}return o.destroy=function(){o.detachEvents(),o=undefined},n.pluginHook("addView",o),o};n.addView=function(e,t){return new s(e,t)},n.navbarInitCallback=function(e,t,r,s,o,u){var a={container:r,innerContainer:s},f={url:o,query:i.parseUrlQuery(o||""),container:t,name:i(t).attr("data-page"),view:e,from:u},l={navbar:a,page:f};n.pluginHook("navbarInit",a,f),i(s).trigger("navbarInit",l)},n.sizeNavbars=function(e){var t=e?i(e).find(".navbar .navbar-inner:not(.cached)"):i(".navbar .navbar-inner:not(.cached)");t.each(function(){var e=i(this),t=n.rtl?e.find(".right"):e.find(".left"),r=n.rtl?e.find(".left"):e.find(".right"),s=e.find(".center"),o=t.length===0,u=r.length===0,a=o?0:t.outerWidth(!0),f=u?0:r.outerWidth(!0),l=s.outerWidth(!0),c=e.width(),h=e.hasClass("navbar-on-left"),p,d;u&&(p=c-l),o&&(p=0),!o&&!u&&(p=(c-f-l+a)/2);var v=(c-l)/2;c-a-f>l?(v<a&&(v=a),v+l>c-f&&(v=c-f-l),d=v-p):d=0;var m=n.rtl?-1:1,g=d;n.rtl&&o&&u&&s.length>0&&(g=-g),s.css({left:g+"px"}),s.hasClass("sliding")&&(s[0].f7NavbarLeftOffset=-(p+d)*m,s[0].f7NavbarRightOffset=(c-p-d-l)*m,h&&s.transform("translate3d("+s[0].f7NavbarLeftOffset+"px, 0, 0)")),!o&&t.hasClass("sliding")&&(n.rtl?(t[0].f7NavbarLeftOffset=-(c-t.outerWidth())/2*m,t[0].f7NavbarRightOffset=a*m):(t[0].f7NavbarLeftOffset=-a,t[0].f7NavbarRightOffset=(c-t.outerWidth())/2),h&&t.transform("translate3d("+t[0].f7NavbarLeftOffset+"px, 0, 0)")),!u&&r.hasClass("sliding")&&(n.rtl?(r[0].f7NavbarLeftOffset=-f*m,r[0].f7NavbarRightOffset=(c-r.outerWidth())/2*m):(r[0].f7NavbarLeftOffset=-(c-r.outerWidth())/2,r[0].f7NavbarRightOffset=f),h&&r.transform("translate3d("+r[0].f7NavbarLeftOffset+"px, 0, 0)"))})},n.hideNavbar=function(e){return i(e).addClass("hidden-navbar"),!0},n.showNavbar=function(e){var t=i(e);return t.addClass("hiding-navbar").removeClass("hidden-navbar").find(".navbar").transitionEnd(function(){t.removeClass("hiding-navbar")}),!0},n.hideToolbar=function(e){return i(e).addClass("hidden-toolbar"),!0},n.showToolbar=function(e){var t=i(e);t.addClass("hiding-toolbar").removeClass("hidden-toolbar").find(".toolbar").transitionEnd(function(){t.removeClass("hiding-toolbar")})},n.cache=[],n.removeFromCache=function(e){var t=!1;for(var r=0;r<n.cache.length;r++)n.cache[r].url===e&&(t=r);t!==!1&&n.cache.splice(t,1)},n.xhr=!1,n.get=function(e,t,r){var s=e;n.params.cacheIgnoreGetParameters&&e.indexOf("?")>=0&&(s=e.split("?")[0]);if(n.params.cache&&e.indexOf("nocache")<0&&n.params.cacheIgnore.indexOf(s)<0)for(var o=0;o<n.cache.length;o++)if(n.cache[o].url===s&&(new Date).getTime()-n.cache[o].time<n.params.cacheDuration)return r(n.cache[o].data),!1;return n.xhr=i.ajax({url:e,method:"GET",start:n.params.onAjaxStart,complete:function(e){e.status===200||e.status===0?(r(e.responseText,!1),n.params.cache&&(n.removeFromCache(s),n.cache.push({url:s,time:(new Date).getTime(),data:e.responseText}))):r(e.responseText,!0),n.params.onAjaxComplete&&n.params.onAjaxComplete(e)},error:function(e){r(e.responseText,!0),n.params.onAjaxError&&n.params.onAjaxonAjaxError(e)}}),t&&(t.xhr=n.xhr),n.xhr},n.pageCallbacks={},n.onPage=function(e,t,r){if(t&&t.split(" ").length>1){var i=t.split(" "),s=[];for(var o=0;o<i.length;o++)s.push(n.onPage(e,i[o],r));return s.remove=function(){for(var e=0;e<s.length;e++)s[e].remove()},s.trigger=function(){for(var e=0;e<s.length;e++)s[e].trigger()},s}var u=n.pageCallbacks[e][t];return u||(u=n.pageCallbacks[e][t]=[]),n.pageCallbacks[e][t].push(r),{remove:function(){var e;for(var t=0;t<u.length;t++)u[t].toString()===r.toString()&&(e=t);typeof e!="undefined"&&u.splice(e,1)},trigger:r}};var u="beforeInit init beforeAnimation afterAnimation beforeRemove".split(" ");for(var a=0;a<u.length;a++)n.pageCallbacks[u[a]]={},o(u[a]);n.triggerPageCallbacks=function(e,t,r){var i=n.pageCallbacks[e]["*"];if(i)for(var s=0;s<i.length;s++)i[s](r);var o=n.pageCallbacks[e][t];if(!o||o.length===0)return;for(var u=0;u<o.length;u++)o[u](r)},n.pageInitCallback=function(e,t,r,s,o){if(t.f7PageInitialized)return;t.f7PageInitialized=!0;var u={container:t,url:r,query:i.parseUrlQuery(r||""),name:i(t).attr("data-page"),view:e,from:s,navbarInnerContainer:o};t.f7PageData=u,e&&(e.activePage=u),n.pluginHook("pageBeforeInit",u),n.params.onPageBeforeInit&&n.params.onPageBeforeInit(n,u),n.triggerPageCallbacks("beforeInit",u.name,u),i(u.container).trigger("pageBeforeInit",{page:u}),n.initPage(t),n.pluginHook("pageInit",u),n.params.onPageInit&&n.params.onPageInit(n,u),n.triggerPageCallbacks("init",u.name,u),i(u.container).trigger("pageInit",{page:u})},n.pageRemoveCallback=function(e,t,r){var s={container:t,name:i(t).attr("data-page"),view:e,from:r};n.pluginHook("pageBeforeRemove",s),n.params.onPageBeforeRemove&&n.params.onPageBeforeRemove(n,s),n.triggerPageCallbacks("beforeRemove",s.name,s),i(s.container).trigger("pageBeforeRemove",{page:s})},n.pageAnimCallbacks=function(e,t,r){var s={container:r.pageContainer,url:r.url,query:i.parseUrlQuery(r.url||""),name:i(r.pageContainer).attr("data-page"),view:t,from:r.position,swipeBack:r.swipeBack},o=r.oldPage,u=r.newPage;r.pageContainer.f7PageData=s,e==="after"&&(n.pluginHook("pageAfterAnimation",s),n.params.onPageAfterAnimation&&n.params.onPageAfterAnimation(n,s),n.triggerPageCallbacks("afterAnimation",s.name,s),i(s.container).trigger("pageAfterAnimation",{page:s})),e==="before"&&(i(t.container).attr("data-page",s.name),t&&(t.activePage=s),u.hasClass("no-navbar")&&!o.hasClass("no-navbar")&&t.hideNavbar(),!u.hasClass("no-navbar")&&o.hasClass("no-navbar")&&t.showNavbar(),u.hasClass("no-toolbar")&&!o.hasClass("no-toolbar")&&t.hideToolbar(),!u.hasClass("no-toolbar")&&o.hasClass("no-toolbar")&&t.showToolbar(),n.pluginHook("pageBeforeAnimation",s),n.params.onPageBeforeAnimation&&n.params.onPageBeforeAnimation(n,s),n.triggerPageCallbacks("beforeAnimation",s.name,s),i(s.container).trigger("pageBeforeAnimation",{page:s}))},n.initPage=function(e){n.sizeNavbars&&n.sizeNavbars(i(e).parents("."+n.params.viewClass)[0]),n.initMessages&&n.initMessages(e),n.initFormsStorage&&n.initFormsStorage(e),n.initSmartSelects&&n.initSmartSelects(e),n.initSlider&&n.initSlider(e),n.initPullToRefresh&&n.initPullToRefresh(e),n.initInfiniteScroll&&n.initInfiniteScroll(e),n.initSearchbar&&n.initSearchbar(e),n.initMessagebar&&n.initMessagebar(e)},n.allowPageChange=!0,n._tempDomElement=document.createElement("div"),n.loadContent=function(e,t,r,i){if(!e.allowPageChange)return!1;e.allowPageChange=!1,n.xhr&&e.xhr&&e.xhr===n.xhr&&(n.xhr.abort(),n.xhr=!1);if(n.params.pushState){typeof i=="undefined"&&(i=!0);var s=n.params.pushStateRoot||"";i&&history.pushState({content:t,url:"#content-"+e.history.length},"",s+n.params.pushStateSeparator+"#content-"+e.history.length)}p(t,null,function(t){h(e,null,t,r)})},n.loadPage=function(e,t,r,i){if(!e.allowPageChange)return!1;if(e.url===t)return!1;e.allowPageChange=!1,n.xhr&&e.xhr&&e.xhr===n.xhr&&(n.xhr.abort(),n.xhr=!1),n.get(t,e,function(s,o){if(o){e.allowPageChange=!0;return}if(n.params.pushState){typeof i=="undefined"&&(i=!0);var u=n.params.pushStateRoot||"";i&&history.pushState({url:t},"",u+n.params.pushStateSeparator+t)}p(s,t,function(n){h(e,t,n,r)})})},n.goBack=function(e,t,r,s,o){function w(){function i(){n.afterGoBack(e,d[0],v[0]),n.pageAnimCallbacks("after",e,{pageContainer:v[0],url:t,position:"left",oldPage:d,newPage:v})}n.pageAnimCallbacks("before",e,{pageContainer:v[0],url:t,position:"left",oldPage:d,newPage:v}),r?(l(v,d,"to-right",e),b&&setTimeout(function(){c(g,m,"to-right",e)},0),v.animationEnd(function(){i()})):(g.find(".sliding, .sliding .back .icon").transform(""),i())}function E(){v=f(".page",n._tempDomElement,e);if(!v){e.allowPageChange=!0;return}v.addClass("page-on-left"),d=i(h[0]),e.params.dynamicNavbar&&(b=!0,g=f(".navbar-inner",n._tempDomElement,e),g||(b=!1)),b&&(y=u.find(".navbar"),m=y.find(".navbar-inner"),g.addClass(m.length>0?"navbar-on-left":"navbar-on-center"),m.length>1&&(i(m[0]).remove(),m=y.find(".navbar-inner")),y.prepend(g[0])),a.prepend(v[0]),n.pageInitCallback(e,v[0],t,"left",b?g[0]:undefined),b&&n.navbarInitCallback(e,v[0],y[0],g[0],t,"right"),b&&g.hasClass("navbar-on-left")&&r&&g.find(".sliding").each(function(){var e=i(this);n.params.animateNavBackIcon&&(e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+ -this.f7NavbarLeftOffset+"px,0,0)"),e.hasClass("center")&&m.find(".left .back .icon").length>0&&(this.f7NavbarLeftOffset+=m.find(".left .back span")[0].offsetLeft)),e.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")});if(s){v.addClass("page-on-left"),e.allowPageChange=!0;return}e.url=t;var o=v[0].clientLeft;w()}if(!e.allowPageChange)return!1;e.allowPageChange=!1,n.xhr&&e.xhr&&e.xhr===n.xhr&&(n.xhr.abort(),n.xhr=!1),n.pluginHook("goBack",e,t,s),n.params.pushState&&(typeof o=="undefined"&&(o=!0),!s&&history.state&&o&&history.back());var u=i(e.container),a=i(e.pagesContainer),h=a.children(".page"),d,v,m,g,y,b;typeof r=="undefined"&&(r=e.params.animatePages);if(h.length>1){if(s){e.allowPageChange=!0;return}e.url=e.history[e.history.length-2],v=i(h[h.length-2]),d=i(h[h.length-1]);if(e.params.dynamicNavbar){b=!0;var S=u.find(".navbar-inner:not(.cached)");g=i(S[0]),m=i(S[1])}w()}else{t&&t.indexOf("#")===0&&(t=undefined),e.history.length>1&&(t=e.history[e.history.length-2]);if(!t){e.allowPageChange=!0;return}if(!e.params.domCache&&t in e.contentCache){var x=e.contentCache[t];n._tempDomElement.innerHTML="",i(n._tempDomElement).append(x.nav[0]).append(x.page[0]),E();return}n.get(t,e,function(t,r){if(r){e.allowPageChange=!0;return}p(t,null,function(e){n._tempDomElement.innerHTML=e,E()})})}},n.afterGoBack=function(e,t,r){t=i(t),r=i(r),n.pageRemoveCallback(e,t[0],"right"),t.remove(),r.removeClass("page-from-left-to-center page-on-left").addClass("page-on-center"),e.allowPageChange=!0;if(e.params.dynamicNavbar){var s=i(e.container).find(".navbar-inner:not(.cached)"),o=i(s[1]).remove(),u=i(s[0]).removeClass("navbar-on-left navbar-from-left-to-center").addClass("navbar-on-center");if(n.params.preloadPreviousPage&&e.params.domCache){var a=i(e.container).find(".navbar-inner.cached");i(a[a.length-1]).removeClass("cached")}}var f=e.history.pop();!e.params.domCache&&f&&f.indexOf("#content-")>-1&&f in e.contentCache&&(e.contentCache[f]=null,delete e.contentCache[f]),n.params.pushState&&n.pushStateClearQueue();if(n.params.preloadPreviousPage){if(e.params.domCache){var l=i(e.container).find(".page.cached");i(l[l.length-1]).removeClass("cached")}n.goBack(e,!1,undefined,!0)}},n.initClickEvents=function(){function e(e){var t=i(this),r=t.attr("href"),s=t[0].nodeName.toLowerCase()==="a";if(s)for(var o=0;o<n.params.externalLinks.length;o++){if(t.hasClass(n.params.externalLinks[o]))return;if(t[0].rel===n.params.externalLinks[o])return}t.hasClass("smart-select")&&n.smartSelectOpen&&n.smartSelectOpen(t),t.hasClass("open-panel")&&(i(".panel").length===1?i(".panel").hasClass("panel-left")?n.openPanel("left"):n.openPanel("right"):t.attr("data-panel")==="right"?n.openPanel("right"):n.openPanel("left")),t.hasClass("close-panel")&&n.closePanel(),t.hasClass("panel-overlay")&&n.params.panelsCloseByOutside&&n.closePanel();if(t.hasClass("open-popover")){var u;t.attr("data-popover")?u=t.attr("data-popover"):u=".popover",n.popover(u,t)}t.hasClass("close-popover")&&n.closeModal(".popover.modal-in");var a;t.hasClass("open-popup")&&(t.attr("data-popup")?a=t.attr("data-popup"):a=".popup",n.popup(a)),t.hasClass("close-popup")&&(t.attr("data-popup")?a=t.attr("data-popup"):a=".popup.modal-in",n.closeModal(a));var f;t.hasClass("open-login-screen")&&(t.attr("data-login-screen")?f=t.attr("data-login-screen"):f=".login-screen",n.loginScreen(f)),t.hasClass("close-login-screen")&&n.closeModal(".login-screen.modal-in"),t.hasClass("modal-overlay")&&(i(".modal.modal-in").length>0&&n.params.modalCloseByOutside&&n.closeModal(".modal.modal-in"),i(".actions-modal.modal-in").length>0&&n.params.actionsCloseByOutside&&n.closeModal(".actions-modal.modal-in"),i(".popover.modal-in").length>0&&n.closeModal(".popover.modal-in")),t.hasClass("popup-overlay")&&i(".popup.modal-in").length>0&&n.params.popupCloseByOutside&&n.closeModal(".popup.modal-in"),t.hasClass("tab-link")&&n.showTab(t.attr("data-tab")||t.attr("href"),t);if(t.hasClass("swipeout-delete"))if(t.attr("data-confirm")){var l=t.attr("data-confirm"),c=t.attr("data-confirm-title");c?n.confirm(l,c,function(){n.swipeoutDelete(t.parents(".swipeout"))}):n.confirm(l,function(){n.swipeoutDelete(t.parents(".swipeout"))})}else n.swipeoutDelete(t.parents(".swipeout"));t.hasClass("toggle-sortable")&&n.sortableToggle(t.data("sortable")),t.hasClass("open-sortable")&&n.sortableOpen(t.data("sortable")),t.hasClass("close-sortable")&&n.sortableClose(t.data("sortable"));if(t.hasClass("accordion-item-toggle")||t.hasClass("item-link")&&t.parent().hasClass("accordion-item")){var h=t.parents(".accordion-item");h.length===0&&(h=t.parents("li")),n.accordionToggle(h)}if(n.params.ajaxLinks&&!t.is(n.params.ajaxLinks)||!s)return;s&&e.preventDefault();var p=r&&r.length>0&&r.indexOf("#")!==0;if(p||t.hasClass("back")){var d;t.attr("data-view")?d=i(t.attr("data-view"))[0].f7View:(d=t.parents("."+n.params.viewClass)[0]&&t.parents("."+n.params.viewClass)[0].f7View,d&&d.params.linksView&&(d=i(d.params.linksView)[0].f7View));if(!d)for(var o=0;o<n.views.length;o++)n.views[o].main&&(d=n.views[o]);if(!d)return;var v;t.hasClass("no-animation")&&(v=!1),t.hasClass("with-animation")&&(v=!0),t.hasClass("back")?d.goBack(t.attr("href"),v):d.loadPage(t.attr("href"),v)}}i(document).on("click","a, .open-panel, .close-panel, .panel-overlay, .modal-overlay, .popup-overlay, .swipeout-delete, .close-popup, .open-popup, .open-popover, .open-login-screen, .close-login-screen .smart-select, .toggle-sortable, .open-sortable, .close-sortable, .accordion-item-toggle",e)},n.initResize=function(){i(window).on("resize",n.resize),i(window).on("orientationchange",n.orientationchange)},n.resize=function(){n.sizeNavbars&&n.sizeNavbars(),d()},n.orientationchange=function(){n.device&&n.device.minimalUi&&(window.orientation===90||window.orientation===-90)&&(document.body.scrollTop=0),d()},n.allowPanelOpen=!0,n.openPanel=function(e){function a(){o.transitionEnd(function(e){i(e.target).is(o)?(t.hasClass("active")?t.trigger("opened"):t.trigger("closed"),n.allowPanelOpen=!0):a()})}if(!n.allowPanelOpen)return!1;var t=i(".panel-"+e);if(t.length===0||t.hasClass("active"))return!1;n.closePanel(),n.allowPanelOpen=!1;var r=t.hasClass("panel-reveal")?"reveal":"cover";t.css({display:"block"}).addClass("active"),t.trigger("open"),t.find("."+n.params.viewClass).length>0&&n.sizeNavbars&&n.sizeNavbars(t.find("."+n.params.viewClass)[0]);var s=t[0].clientLeft,o=r==="reveal"?i("."+n.params.viewsClass):t,u=!1;return a(),i("body").addClass("with-panel-"+e+"-"+r),!0},n.closePanel=function(){var e=i(".panel.active");if(e.length===0)return!1;var t=e.hasClass("panel-reveal")?"reveal":"cover",r=e.hasClass("panel-left")?"left":"right";e.removeClass("active");var s=t==="reveal"?i("."+n.params.viewsClass):e;e.trigger("close"),n.allowPanelOpen=!1,s.transitionEnd(function(){if(e.hasClass("active"))return;e.css({display:""}),e.trigger("closed"),i("body").removeClass("panel-closing"),n.allowPanelOpen=!0}),i("body").addClass("panel-closing").removeClass("with-panel-"+r+"-"+t)},n.initSwipePanels=function(){function g(t){if(!n.allowPanelOpen||!n.params.swipePanel||r)return;if(i(".modal-in, .photo-browser-in").length>0)return;if(!n.params.swipePanelCloseOpposite&&i(".panel.active").length>0&&!e.hasClass("active"))return;u.x=t.type==="touchstart"?t.targetTouches[0].pageX:t.pageX,u.y=t.type==="touchstart"?t.targetTouches[0].pageY:t.pageY,n.params.swipePanelCloseOpposite&&(i(".panel.active").length>0?v=i(".panel.active").hasClass("panel-left")?"left":"right":v=n.params.swipePanel),e=i(".panel.panel-"+v);if(n.params.swipePanelActiveArea){if(v==="left"&&u.x>n.params.swipePanelActiveArea)return;if(v==="right"&&u.x<window.innerWidth-n.params.swipePanelActiveArea)return}s=!1,r=!0,o=undefined,a=(new Date).getTime(),d=undefined}function y(i){if(!r)return;if(i.f7PreventPanelSwipe)return;var g=i.type==="touchmove"?i.targetTouches[0].pageX:i.pageX,y=i.type==="touchmove"?i.targetTouches[0].pageY:i.pageY;typeof o=="undefined"&&(o=!!(o||Math.abs(y-u.y)>Math.abs(g-u.x)));if(o){r=!1;return}if(!d){g>u.x?d="to-right":d="to-left";if(v==="left"&&d==="to-left"&&!e.hasClass("active")||v==="right"&&d==="to-right"&&!e.hasClass("active")){r=!1;return}}if(n.params.swipePanelNoFollow){var b=(new Date).getTime()-a;b<300&&(d==="to-left"&&(v==="right"&&n.openPanel(v),v==="left"&&e.hasClass("active")&&n.closePanel()),d==="to-right"&&(v==="left"&&n.openPanel(v),v==="right"&&e.hasClass("active")&&n.closePanel())),r=!1,s=!1;return}s||(p=e.hasClass("panel-cover")?"cover":"reveal",e.show(),t.show(),c=e.hasClass("active"),h=e.width(),e.transition(0),e.find("."+n.params.viewClass).length>0&&n.sizeNavbars&&n.sizeNavbars(e.find("."+n.params.viewClass)[0])),s=!0,i.preventDefault();var w=c?0:-n.params.swipePanelThreshold;v==="right"&&(w=-w),f=g-u.x+w,v==="right"?(l=f-(c?h:0),l>0&&(l=0),l<-h&&(l=-h)):(l=f+(c?h:0),l<0&&(l=0),l>h&&(l=h)),p==="reveal"?(m.transform("translate3d("+l+"px,0,0)").transition(0),t.transform("translate3d("+l+"px,0,0)"),n.pluginHook("swipePanelSetTransform",m[0],e[0],Math.abs(l/h))):(e.transform("translate3d("+l+"px,0,0)").transition(0),n.pluginHook("swipePanelSetTransform",m[0],e[0],Math.abs(l/h)))}function b(o){if(!r||!s){r=!1,s=!1;return}r=!1,s=!1;var u=(new Date).getTime()-a,f,d=l===0||Math.abs(l)===h;c?l===-h?f="reset":u<300&&Math.abs(l)>=0||u>=300&&Math.abs(l)<=h/2?v==="left"&&l===h?f="reset":f="swap":f="reset":l===0?f="reset":u<300&&Math.abs(l)>0||u>=300&&Math.abs(l)>=h/2?f="swap":f="reset",f==="swap"&&(n.allowPanelOpen=!0,c?(n.closePanel(),d&&(e.css({display:""}),i("body").removeClass("panel-closing"))):n.openPanel(v),d&&(n.allowPanelOpen=!0));if(f==="reset")if(c)n.allowPanelOpen=!0,n.openPanel(v);else{n.closePanel();if(d)n.allowPanelOpen=!0,e.css({display:""});else{var g=p==="reveal"?m:e;i("body").addClass("panel-closing"),g.transitionEnd(function(){n.allowPanelOpen=!0,e.css({display:""}),i("body").removeClass("panel-closing")})}}p==="reveal"&&(m.transition(""),m.transform("")),e.transition("").transform(""),t.css({display:""}).transform("")}var e=i(".panel.panel-"+n.params.swipePanel);if(e.length===0)return;var t=i(".panel-overlay"),r,s,o,u={},a,f,l,c,h,p,d,v,m=i("."+n.params.viewsClass);v=n.params.swipePanel,i(document).on(n.touchEvents.start,g),i(document).on(n.touchEvents.move,y),i(document).on(n.touchEvents.end,b)};var v=document.createElement("div");n.modal=function(e){e=e||{};var t="";if(e.buttons&&e.buttons.length>0)for(var r=0;r<e.buttons.length;r++)t+='<span class="modal-button'+(e.buttons[r].bold?" modal-button-bold":"")+'">'+e.buttons[r].text+"</span>";var s=n.params.modalTemplate;e.title?s=s.replace(/{{if\ title}}/g,"").replace(/{{\/if\ title}}/g,""):s=s.split("{{if title}}")[0]+s.split("{{/if title}}")[1];var o=s.replace(/{{title}}/g,e.title||"").replace(/{{text}}/g,e.text||"").replace(/{{afterText}}/g,e.afterText||"").replace(/{{buttons}}/g,t).replace(/{{noButtons}}/g,!e.buttons||e.buttons.length===0?"modal-no-buttons":"");v.innerHTML=o;var u=i(v).children();return i("body").append(u[0]),u.find(".modal-button").each(function(t,r){i(r).on("click",function(r){e.buttons[t].close!==!1&&n.closeModal(u),e.buttons[t].onClick&&e.buttons[t].onClick(u,r),e.onClick&&e.onClick(u,t)})}),n.openModal(u),u[0]},n.alert=function(e,t,r){return typeof t=="function"&&(r=arguments[1],t=undefined),n.modal({text:e||"",title:typeof t=="undefined"?n.params.modalTitle:t,buttons:[{text:n.params.modalButtonOk,bold:!0,onClick:r}]})},n.confirm=function(e,t,r,i){return typeof t=="function"&&(i=arguments[2],r=arguments[1],t=undefined),n.modal({text:e||"",title:typeof t=="undefined"?n.params.modalTitle:t,buttons:[{text:n.params.modalButtonCancel,onClick:i},{text:n.params.modalButtonOk,bold:!0,onClick:r}]})},n.prompt=function(e,t,r,s){return typeof t=="function"&&(s=arguments[2],r=arguments[1],t=undefined),n.modal({text:e||"",title:typeof t=="undefined"?n.params.modalTitle:t,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:n.params.modalButtonCancel},{text:n.params.modalButtonOk,bold:!0}],onClick:function(e,t){t===0&&s&&s(i(e).find(".modal-text-input").val()),t===1&&r&&r(i(e).find(".modal-text-input").val())}})},n.modalLogin=function(e,t,r,s){return typeof t=="function"&&(s=arguments[2],r=arguments[1],t=undefined),n.modal({text:e||"",title:typeof t=="undefined"?n.params.modalTitle:t,afterText:'<input type="text" name="modal-username" placeholder="'+n.params.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+n.params.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:n.params.modalButtonCancel},{text:n.params.modalButtonOk,bold:!0}],onClick:function(e,t){var n=i(e).find('.modal-text-input[name="modal-username"]').val(),o=i(e).find('.modal-text-input[name="modal-password"]').val();t===0&&s&&s(n,o),t===1&&r&&r(n,o)}})},n.modalPassword=function(e,t,r,s){return typeof t=="function"&&(s=arguments[2],r=arguments[1],t=undefined),n.modal({text:e||"",title:typeof t=="undefined"?n.params.modalTitle:t,afterText:'<input type="password" name="modal-password" placeholder="'+n.params.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:n.params.modalButtonCancel},{text:n.params.modalButtonOk,bold:!0}],onClick:function(e,t){var n=i(e).find('.modal-text-input[name="modal-password"]').val();t===0&&s&&s(n),t===1&&r&&r(n)}})},n.showPreloader=function(e){return n.modal({title:e||n.params.modalPreloaderTitle,text:'<div class="preloader"></div>'})},n.hidePreloader=function(){n.closeModal(".modal.modal-in")},n.showIndicator=function(){i("body").append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')},n.hideIndicator=function(){i(".preloader-indicator-overlay, .preloader-indicator-modal").remove()},n.actions=function(e){e=e||[],e.length>0&&!i.isArray(e[0])&&(e=[e]);var t=n.params.modalActionsTemplate,r="";for(var s=0;s<e.length;s++)for(var o=0;o<e[s].length;o++){o===0&&(r+='<div class="actions-modal-group">');var u=e[s][o],a=u.label?"actions-modal-label":"actions-modal-button";u.bold&&(a+=" actions-modal-button-bold"),u.color&&(a+=" color-"+u.color),r+='<span class="'+a+'">'+u.text+"</span>",o===e[s].length-1&&(r+="</div>")}var f=t.replace(/{{buttons}}/g,r);v.innerHTML=f;var l=i(v).children();i("body").append(l[0]);var c=l.find(".actions-modal-group");return c.each(function(t,r){var s=t;i(r).children().each(function(t,r){var o=t,u=e[s][o];i(r).hasClass("actions-modal-button")&&i(r).on("click",function(e){u.close!==!1&&n.closeModal(l),u.onClick&&u.onClick(l,e)})})}),n.openModal(l),l[0]},n.popover=function(e,t,r){function o(){e.css({left:"",top:""});var n=e.width(),r=e.height(),s=e.find(".popover-angle"),o=s.width()/2;s.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""});var u=t.outerWidth(),a=t.outerHeight(),f=t.offset(),l=t.parents(".page");l.length>0&&(f.top=f.top-l[0].scrollTop);var c=i(window).height(),h=i(window).width(),p=0,d=0,v=0,m="top";r+o<f.top?p=f.top-r-o:r+o<c-f.top-a?(m="bottom",p=f.top+a+o):(m="middle",p=a/2+f.top-r/2,v=p,p<0?p=5:p+r>c&&(p=c-r-5),v-=p),m==="top"||m==="bottom"?(d=u/2+f.left-n/2,v=d,d<5&&(d=5),d+n>h&&(d=h-n-5),m==="top"&&s.addClass("on-bottom"),m==="bottom"&&s.addClass("on-top"),v-=d,s.css({left:n/2-o+v+"px"})):m==="middle"&&(d=f.left-n-o,s.addClass("on-right"),d<5&&(d=f.left+u+o,s.removeClass("on-right").addClass("on-left")),d+n>h&&(d=h-n-5,s.removeClass("on-right").addClass("on-left")),s.css({top:r/2-o+v+"px"})),e.css({top:p+"px",left:d+"px"})}typeof r=="undefined"&&(r=!0);if(typeof e=="string"&&e.indexOf("<")>=0){var s=document.createElement("div");s.innerHTML=i.trim(e);if(!(s.childNodes.length>0))return!1;e=s.childNodes[0],r&&e.classList.add("remove-on-close"),i("body").append(e)}return e=i(e),t=i(t),e.length===0||t.length===0?!1:(e.find(".popover-angle").length===0&&e.append('<div class="popover-angle"></div>'),e.show(),o(),i(window).on("resize",o),e.on("close",function(){i(window).off("resize",o)}),e.find("."+n.params.viewClass).length>0&&n.sizeNavbars(e.find("."+n.params.viewClass)[0]),n.openModal(e),e[0])},n.popup=function(e,t){typeof t=="undefined"&&(t=!0);if(typeof e=="string"&&e.indexOf("<")>=0){var r=document.createElement("div");r.innerHTML=i.trim(e);if(!(r.childNodes.length>0))return!1;e=r.childNodes[0],t&&e.classList.add("remove-on-close"),i("body").append(e)}return e=i(e),e.length===0?!1:(e.show(),e.find("."+n.params.viewClass).length>0&&n.sizeNavbars(e.find("."+n.params.viewClass)[0]),n.openModal(e),e[0])},n.loginScreen=function(e){return e||(e=".login-screen"),e=i(e),e.length===0?!1:(e.show(),e.find("."+n.params.viewClass).length>0&&n.sizeNavbars(e.find("."+n.params.viewClass)[0]),n.openModal(e),e[0])},n.openModal=function(e){e=i(e);var t=e.hasClass("popover"),n=e.hasClass("popup"),r=e.hasClass("login-screen");!t&&!n&&!r&&e.css({marginTop:-Math.round(e.outerHeight()/2)+"px"});var s;r||(i(".modal-overlay").length===0&&!n&&i("body").append('<div class="modal-overlay"></div>'),i(".popup-overlay").length===0&&n&&i("body").append('<div class="popup-overlay"></div>'),s=n?i(".popup-overlay"):i(".modal-overlay"));var o=e[0].clientLeft;return e.trigger("open"),r||s.addClass("modal-overlay-visible"),e.removeClass("modal-out").addClass("modal-in").transitionEnd(function(t){e.hasClass("modal-out")?e.trigger("closed"):e.trigger("opened")}),!0},n.closeModal=function(e){e=i(e||".modal-in");if(typeof e!="undefined"&&e.length===0)return;var t=e.hasClass("popover"),n=e.hasClass("popup"),r=e.hasClass("login-screen"),s=e.hasClass("remove-on-close"),o=n?i(".popup-overlay"):i(".modal-overlay");return o.removeClass("modal-overlay-visible"),e.trigger("close"),t?(e.removeClass("modal-in modal-out").trigger("closed").hide(),s&&e.remove()):e.removeClass("modal-in").addClass("modal-out").transitionEnd(function(t){e.hasClass("modal-out")?e.trigger("closed"):e.trigger("opened"),n||r?(e.removeClass("modal-out").hide(),s&&e.length>0&&e.remove()):e.remove()}),!0},n.initPullToRefresh=function(e){function m(e){if(r){if(n.device.os!=="android")return;if("targetTouches"in e&&e.targetTouches.length>1)return}s=!1,r=!0,u=undefined,o.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,o.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY,f=(new Date).getTime()}function g(e){if(!r)return;var t=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX,i=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;typeof u=="undefined"&&(u=!!(u||Math.abs(i-o.y)>Math.abs(t-o.x)));if(!u){r=!1;return}v=l[0].scrollTop;if(!s){l.removeClass("transitioning");if(v>l[0].offsetHeight){r=!1;return}p=l.hasClass("refreshing")?44:0,l[0].scrollHeight===l[0].offsetHeight||n.device.os!=="ios"?h=!0:h=!1}s=!0,a=i-o.y;if(!(a>0&&v<=0||v<0)){l.removeClass("pull-up"),c=!1;return}h&&(e.preventDefault(),d=Math.pow(a,.85)+p,l.transform("translate3d(0,"+d+"px,0)")),h&&Math.pow(a,.85)>44||!h&&a>=88?(c=!0,l.addClass("pull-up")):(c=!1,l.removeClass("pull-up"))}function y(e){if(!r||!s){r=!1,s=!1;return}d&&(l.addClass("transitioning"),d=0),l.transform(""),c&&(l.addClass("refreshing"),l.trigger("refresh",{done:function(){n.pullToRefreshDone(l)}})),r=!1,s=!1}function w(){t.off(n.touchEvents.start,m),t.off(n.touchEvents.move,g),t.off(n.touchEvents.end,y),b.off("pageBeforeRemove",w)}var t=i(e);t.hasClass("pull-to-refresh-content")||(t=t.find(".pull-to-refresh-content"));if(t.length===0)return;var r,s,o={},u,a,f,l,c=!1,h=!1,p=0,d,v;l=t,t.on(n.touchEvents.start,m),t.on(n.touchEvents.move,g),t.on(n.touchEvents.end,y);var b=t.hasClass("page")?t:t.parents(".page");if(b.length===0)return;b.on("pageBeforeRemove",w)},n.pullToRefreshDone=function(e){e=i(e),e.length===0&&(e=i(".pull-to-refresh-content.refreshing")),e.removeClass("refreshing").addClass("transitioning"),e.transitionEnd(function(){e.removeClass("transitioning pull-up")})},n.pullToRefreshTrigger=function(e){e=i(e),e.length===0&&(e=i(".pull-to-refresh-content"));if(e.hasClass("refreshing"))return;e.addClass("transitioning refreshing"),e.trigger("refresh",{done:function(){n.pullToRefreshDone(e)}})},n.attachInfiniteScroll=function(e){i(e).on("scroll",m)},n.detachInfiniteScroll=function(e){i(e).off("scroll",m)},n.initInfiniteScroll=function(e){function r(){n.detachInfiniteScroll(t),e.off("pageBeforeRemove",r)}e=i(e);var t=e.find(".infinite-scroll");n.attachInfiniteScroll(t),e.on("pageBeforeRemove",r)},n.showTab=function(e,t){var r=i(e);if(r.hasClass("active"))return!1;if(r.length===0)return!1;var s=r.parent(".tabs");if(s.length===0)return!1;n.allowSwipeout=!0;var o=s.parent().hasClass("tabs-animated-wrap");o&&s.transform("translate3d("+ -r.index()*100+"%,0,0)");var u=s.children(".tab.active").removeClass("active");r.addClass("active"),r.trigger("show");if(!o&&r.find(".navbar").length>0){var a;r.hasClass(n.params.viewClass)?a=r[0]:a=r.parents("."+n.params.viewClass)[0],n.sizeNavbars(a)}t?t=i(t):(typeof e=="string"?t=i('.tab-link[href="'+e+'"]'):t=i('.tab-link[href="#'+r.attr("id")+'"]'),t.length===0&&i("[data-tab]").each(function(){r.is(i(this).attr("data-tab"))&&(t=i(this))}));if(t.length===0)return;var f;if(u&&u.length>0){var l=u.attr("id");l&&(f=i('.tab-link[href="#'+l+'"]')),f.length===0&&i("[data-tab]").each(function(){u.is(i(this).attr("data-tab"))&&(f=i(this))})}return t&&t.length>0&&t.addClass("active"),f&&f.length>0&&f.removeClass("active"),!0},n.initFastClicks=function(){function c(e){var t="button checkbox file image radio submit input textarea".split(" ");return document.activeElement&&e!==document.activeElement&&document.activeElement!==document.body?t.indexOf(e.nodeName.toLowerCase())>=0?!1:!0:!1}function h(e){if(document.activeElement===e)return!1;var t=e.nodeName.toLowerCase(),r="button checkbox file image radio submit".split(" ");if(e.disabled||e.readOnly)return!1;if(t==="textarea")return!0;if(t==="select")return n.device.os==="android"?!1:!0;if(t==="input"&&r.indexOf(e.type)<0)return!0}function p(e){e=i(e);if(e.is("label")||e.parents("label").length>0){if(n.device.os==="android"){var t=n.device.osVersion.split(".");return t[0]*1>4||t[0]*1===4&&t[1]*1>=4?!1:!0}return!1}return!0}function d(h){l=!1;if(h.targetTouches.length>1)return!0;if(n.device.os==="ios"){var p=window.getSelection();if(p.rangeCount&&(!p.isCollapsed||document.activeElement===p.focusNode))return u=!0,!0;u=!1}n.device.os==="android"&&c(h.target)&&document.activeElement.blur(),o=!0,s=h.target,r=(new Date).getTime(),e=h.targetTouches[0].pageX,t=h.targetTouches[0].pageY,n.device.os==="ios"&&(a=undefined,i(s).parents().each(function(){var e=this;e.scrollHeight>e.offsetHeight&&!a&&(a=e,a.f7ScrollTop=a.scrollTop)})),h.timeStamp-f<200&&h.preventDefault()}function v(e){if(!o)return;o=!1,s=null,l=!0}function m(e){if(!o)return u||e.preventDefault(),!0;if(document.activeElement===e.target)return!0;u||e.preventDefault();if(e.timeStamp-f<200)return!0;f=e.timeStamp,r=0,o=!1;if(n.device.os==="ios"&&a&&a.scrollTop!==a.f7ScrollTop)return!1;h(s)&&s.focus(),e.preventDefault();var t=e.changedTouches[0],i=document.createEvent("MouseEvents"),l="click";return n.device.os==="android"&&s.nodeName.toLowerCase()==="select"&&(l="mousedown"),i.initMouseEvent(l,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,s.dispatchEvent(i),!1}function g(e){o=!1,s=null}function y(e){var t=!1;return o?(s=null,o=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(s||(t=!0),document.activeElement===s&&(t=!0),e.forwardedTouchEvent&&(t=!0),e.cancelable||(t=!0),t||(e.stopImmediatePropagation(),e.stopPropagation(),s?(p(s)||l)&&e.preventDefault():e.preventDefault(),s=null),t)}if(!n.support.touch)return;var e,t,r,s,o,u,a,f,l;document.addEventListener("click",y,!0),i(document).on("touchstart",d),i(document).on("touchmove",v),i(document).on("touchend",m),i(document).on("touchcancel",g)},n.formsData={},n.formStoreData=function(e,t){n.formsData[e]=t,n.ls["f7form-"+e]=JSON.stringify(t)},n.formDeleteData=function(e){n.formsData[e]&&(n.formsData[e]="",delete n.formsData[e]),n.ls["f7form-"+e]&&(n.ls["f7form-"+e]="",delete n.ls["f7form-"+e])},n.formGetData=function(e){if(n.ls["f7form-"+e])return JSON.parse(n.ls["f7form-"+e]);if(n.formsData[e])return n.formsData[e]},n.formToJSON=function(e){e=i(e);if(e.length!==1)return!1;var t={},n=["submit","image","button","file"],r=[];return e.find("input, select, textarea").each(function(){var s=i(this),o=s.attr("name"),u=s.attr("type"),a=this.nodeName.toLowerCase();if(n.indexOf(u)>=0)return;if(r.indexOf(o)>=0||!o)return;if(a==="select"&&s.attr("multiple"))r.push(o),t[o]=[],e.find('select[name="'+o+'"] option').each(function(){this.selected&&t[o].push(this.value)});else switch(u){case"checkbox":r.push(o),t[o]=[],e.find('input[name="'+o+'"]').each(function(){this.checked&&t[o].push(this.value)});break;case"radio":r.push(o),e.find('input[name="'+o+'"]').each(function(){this.checked&&(t[o]=this.value)});break;default:t[o]=s.val()}}),t},n.formFromJSON=function(e,t){e=i(e);if(e.length!==1)return!1;var n=["submit","image","button","file"],r=[];e.find("input, select, textarea").each(function(){var s=i(this),o=s.attr("name"),u=s.attr("type"),a=this.nodeName.toLowerCase();if(!t[o])return;if(n.indexOf(u)>=0)return;if(r.indexOf(o)>=0||!o)return;if(a==="select"&&s.attr("multiple"))r.push(o),e.find('select[name="'+o+'"] option').each(function(){t[o].indexOf(this.value)>=0?this.selected=!0:this.selected=!1});else switch(u){case"checkbox":r.push(o),e.find('input[name="'+o+'"]').each(function(){t[o].indexOf(this.value)>=0?this.checked=!0:this.checked=!1});break;case"radio":r.push(o),e.find('input[name="'+o+'"]').each(function(){t[o]===this.value?this.checked=!0:this.checked=!1});break;default:s.val(t[o])}})},n.initFormsStorage=function(e){function r(){var e=i(this),t=e[0].id;if(!t)return;var r=n.formToJSON(e);if(!r)return;n.formStoreData(t,r),e.trigger("store",{data:r})}function s(){t.off("change submit",r),e.off("pageBeforeRemove",s)}e=i(e);if(e.length===0)return;var t=e.find("form.store-data");if(t.length===0)return;t.each(function(){var e=this.getAttribute("id");if(!e)return;var t=n.formGetData(e);t&&n.formFromJSON(this,t)}),t.on("change submit",r),e.on("pageBeforeRemove",s)},i(document).on("submit change","form.ajax-submit, form.ajax-submit-onchange",function(e){var t=i(this);if(e.type==="change"&&!t.hasClass("ajax-submit-onchange"))return;e.type==="submit"&&e.preventDefault();var r=t.attr("method")||"GET",s=t.attr("enctype"),o=t.attr("action");if(!o)return;var u;r==="POST"?u=new FormData(t[0]):u=i.serializeObject(n.formToJSON(t[0]));var a=i.ajax({method:r,url:o,contentType:s,data:u,success:function(e){t.trigger("submitted",{data:e,xhr:a})}})}),n.pushStateQueue=[],n.pushStateClearQueue=function(){if(n.pushStateQueue.length===0)return;var e=n.pushStateQueue.pop(),t;n.params.pushStateNoAnimation===!0&&(t=!1),e.action==="goBack"&&n.goBack(e.view,undefined,t,!1,!1),e.action==="loadPage"&&n.loadPage(e.view,e.stateUrl,t,!1),e.action==="loadContent"&&n.loadContent(e.view,e.stateContent,t,!1)},n.initPushState=function(){function t(t){if(e)return;var r;for(var i=0;i<n.views.length;i++)n.views[i].main&&(r=n.views[i]);if(!r)return;var s=t.state;s||(s={url:r.history[0]});var o=s&&s.url||undefined,u=s&&s.content||undefined,a;n.params.pushStateNoAnimation===!0&&(a=!1),o!==r.url&&(r.history.indexOf(o)>=0?r.allowPageChange?n.goBack(r,undefined,a,!1,!1):n.pushStateQueue.push({action:"goBack",view:r}):o&&!u?r.allowPageChange?n.loadPage(r,o,a,!1):n.pushStateQueue.unshift({action:"loadPage",stateUrl:o,view:r}):u&&(r.allowPageChange?n.loadContent(r,u,a,!1):n.pushStateQueue.unshift({action:"loadContent",stateContent:u,view:r})))}var e=!0;i(window).on("load",function(){setTimeout(function(){e=!1},0)}),i(window).on("popstate",t)};var g=function(e){function u(){var e;for(r=0;r<n.views.length;r++)n.views[r].main&&(e=n.views[r]);return e}var t=this,r,s={photos:[],initialSlide:0,spaceBetween:20,speed:300,zoom:!0,maxZoom:3,minZoom:1,exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",swipeToClose:!0,backLinkText:"Close",ofText:"of"};e=e||{};for(var o in s)typeof e[o]=="undefined"&&(e[o]=s[o]);t.params=e;var a=t.params.theme==="dark"?"color-white":"",f=t.params.navbarTemplate||'<div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="link '+(t.params.type==="page"&&"back")+' close-popup photo-browser-close-link" data-popup=".photo-browser-popup"><i class="icon icon-back '+a+'"></i><span>'+t.params.backLinkText+"</span></a></div>"+'<div class="center sliding"><span class="photo-browser-current"></span> <span class="photo-browser-of">'+t.params.ofText+'</span> <span class="photo-browser-total"></span></div>'+'<div class="right"></div>'+"</div>"+"</div>",l=n.rtl?"next":"prev",c=n.rtl?"prev":"next",h=t.params.toolbarTemplate||'<div class="toolbar tabbar"><div class="toolbar-inner"><a href="#" class="link photo-browser-prev"><i class="icon icon-'+l+" "+a+'"></i></a>'+'<a href="#" class="link photo-browser-next"><i class="icon icon-'+c+" "+a+'"></i></a>'+"</div>"+"</div>",p=t.params.template||'<div class="photo-browser photo-browser-'+t.params.theme+'">'+'<div class="view navbar-fixed toolbar-fixed">'+"{{navbar}}"+'<div data-page="photo-browser-slides" class="page no-toolbar {{noNavbar}} toolbar-fixed navbar-fixed">'+"{{toolbar}}"+"{{captions}}"+'<div class="photo-browser-slider-container slider-container">'+'<div class="photo-browser-slider-wrapper slider-wrapper">'+"{{photos}}"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>",d=t.params.photoTemplate||'<div class="photo-browser-slide slider-slide"><span class="photo-browser-zoom-container"><img src="{{url}}"></span></div>',v=t.params.captionsTheme||t.params.theme,m=t.params.captionsTemplate||'<div class="photo-browser-captions photo-browser-captions-'+v+'">{{captions}}</div>',g=t.params.captionTemplate||'<div class="photo-browser-caption" data-caption-index="{{captionIndex}}">{{caption}}</div>',y=t.params.objectTemplate||'<div class="photo-browser-slide photo-browser-object-slide slider-slide">{{html}}</div>',b="",w="";for(r=0;r<t.params.photos.length;r++){var E=t.params.photos[r],S="";typeof E=="string"||E instanceof String?E.indexOf("<")>=0||E.indexOf(">")>=0?S=y.replace(/{{html}}/g,E):S=d.replace(/{{url}}/g,E):typeof E=="object"&&(E.hasOwnProperty("html")&&E.html.length>0?S=y.replace(/{{html}}/g,E.html):E.hasOwnProperty("url")&&E.url.length>0&&(S=d.replace(/{{url}}/g,E.url)),E.hasOwnProperty("caption")&&E.caption.length>0?w+=g.replace(/{{caption}}/g,E.caption).replace(/{{captionIndex}}/g,r):S=S.replace(/{{caption}}/g,"")),b+=S}var x=p.replace("{{navbar}}",t.params.navbar?f:"").replace("{{noNavbar}}",t.params.navbar?"":"no-navbar").replace("{{photos}}",b).replace("{{captions}}",m.replace(/{{captions}}/g,w)).replace("{{toolbar}}",t.params.toolbar?h:"");t.activeSlideIndex=t.params.initialSlide,t.openIndex=t.activeSlideIndex,t.opened=!1,t.open=function(e){typeof e=="undefined"&&(e=t.activeSlideIndex),e=parseInt(e,10);if(t.opened&&t.slider){t.slider.slideTo(e);return}t.opened=!0,t.openIndex=e,t.params.type==="standalone"&&i("body").append(x),t.params.type==="popup"&&(t.popup=n.popup('<div class="popup photo-browser-popup">'+x+"</div>"),i(t.popup).on("closed",t.onPopupClose));if(t.params.type==="page"){i(document).on("pageBeforeInit",t.onPageBeforeInit),i(document).on("pageBeforeRemove",t.onPageBeforeRemove),t.params.view||(t.params.view=u()),t.params.view.loadContent(x);return}t.layout(t.openIndex),t.params.onOpen&&t.params.onOpen(t)},t.close=function(){t.opened=!1;if(!t.sliderContainer||t.sliderContainer.length===0)return;t.params.onClose&&t.params.onClose(t),t.attachEvents(!0),t.params.type==="standalone"&&t.container.removeClass("photo-browser-in").addClass("photo-browser-out").animationEnd(function(){t.container.remove()}),t.slider.destroy(),t.slider=t.sliderContainer=t.sliderWrapper=t.slides=D=P=H=undefined},t.onPopupClose=function(e){t.close(),i(t.popup).off("pageBeforeInit",t.onPopupClose)},t.onPageBeforeInit=function(e){e.detail.page.name==="photo-browser-slides"&&t.layout(t.openIndex),i(document).off("pageBeforeInit",t.onPageBeforeInit)},t.onPageBeforeRemove=function(e){e.detail.page.name==="photo-browser-slides"&&t.close(),i(document).off("pageBeforeRemove",t.onPageBeforeRemove)},t.layout=function(e){t.params.type==="page"?t.container=i(".photo-browser-slider-container").parents(".view"):t.container=i(".photo-browser"),t.params.type==="standalone"&&(t.container.addClass("photo-browser-in"),n.sizeNavbars(t.container)),t.sliderContainer=t.container.find(".photo-browser-slider-container"),t.sliderWrapper=t.container.find(".photo-browser-slider-wrapper"),t.slides=t.container.find(".photo-browser-slide"),t.captionsContainer=t.container.find(".photo-browser-captions"),t.captions=t.container.find(".photo-browser-caption");var r={nextButton:t.params.nextButton||".photo-browser-next",prevButton:t.params.prevButton||".photo-browser-prev",indexButton:t.params.indexButton,initialSlide:e,spaceBetween:t.params.spaceBetween,speed:t.params.speed,onTap:function(e,n){t.params.onTap&&t.params.onTap(e,n)},onClick:function(e,n){t.params.exposition&&t.toggleExposition(),t.params.onClick&&t.params.onClick(e,n)},onDoubleTap:function(e,n){t.toggleZoom(i(n.target).parents(".photo-browser-slide")),t.params.onDoubleTap&&t.params.onDoubleTap(e,n)},onSlideChangeStart:function(e){t.activeSlideIndex=e.activeSlideIndex,t.container.find(".photo-browser-current").text(e.activeSlideIndex+1),t.container.find(".photo-browser-total").text(e.slides.length),i(".photo-browser-prev, .photo-browser-next").removeClass("photo-browser-link-inactive"),e.isFirst&&i(".photo-browser-prev").addClass("photo-browser-link-inactive"),e.isLast&&i(".photo-browser-next").addClass("photo-browser-link-inactive"),t.captions.length>0&&(t.captionsContainer.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active"),t.captionsContainer.find('[data-caption-index="'+t.activeSlideIndex+'"]').addClass("photo-browser-caption-active"));var n=e.slides.eq(e.previousSlideIndex).find("video");n.length>0&&"pause"in n[0]&&n[0].pause(),t.params.onSlideChangeStart&&t.params.onSlideChangeStart(e)},onSlideChangeEnd:function(e){t.params.zoom&&D&&e.previousSlideIndex!==e.activeSlideIndex&&(P.transform("translate3d(0,0,0) scale(1)"),H.transform("translate3d(0,0,0)"),D=P=H=undefined,B=j=1),t.params.onSlideChangeEnd&&t.params.onSlideChangeEnd(e)}};t.params.swipeToClose&&t.params.type!=="page"&&(r.onTouchStart=t.swipeCloseTouchStart,r.onOppositeTouchMove=t.swipeCloseTouchMove,r.onTouchEnd=t.swipeCloseTouchEnd),t.slider=n.slider(t.sliderContainer,r),t.attachEvents()},t.attachEvents=function(e){var r=e?"off":"on";t.params.zoom&&(t.slides[r]("gesturestart",t.onSlideGestureStart),t.slides[r]("gesturechange",t.onSlideGestureChange),t.slides[r]("gestureend",t.onSlideGestureEnd),t.slides[r](n.touchEvents.start,t.onSlideTouchStart),t.slides[r](n.touchEvents.move,t.onSlideTouchMove),t.slides[r](n.touchEvents.end,t.onSlideTouchEnd)),t.container.find(".photo-browser-close-link")[r]("click",t.close)};var T,N,C={},k={},L,A,O=!1,M,_=!0;t.exposed=!1,t.toggleExposition=function(){t.container&&t.container.toggleClass("photo-browser-exposed"),t.params.expositionHideCaptions&&t.captionsContainer.toggleClass("photo-browser-captions-exposed"),t.exposed=!t.exposed},t.expositionOn=function(){t.container&&t.container.addClass("photo-browser-exposed"),t.params.expositionHideCaptions&&t.captionsContainer.addClass("photo-browser-captions-exposed"),t.exposed=!0},t.expositionOff=function(){t.container&&t.container.removeClass("photo-browser-exposed"),t.params.expositionHideCaptions&&t.captionsContainer.removeClass("photo-browser-captions-exposed"),t.exposed=!1};var D,P,H,B=1,j=1,F=!1;t.onSlideGestureStart=function(e){D||(D=i(this),P=D.find("img"),H=P.parent()),P.transition(0),F=!0},t.onSlideGestureChange=function(e){B=e.scale*j,B>t.params.maxZoom&&(B=t.params.maxZoom-1+Math.pow(B-t.params.maxZoom+1,.5)),B<t.params.minZoom&&(B=t.params.minZoom+1-Math.pow(t.params.minZoom-B+1,.5)),P.transform("translate3d(0,0,0) scale("+B+")")},t.onSlideGestureEnd=function(e){B=Math.max(Math.min(B,t.params.maxZoom),t.params.minZoom),P.transition(t.params.speed).transform("translate3d(0,0,0) scale("+B+")"),j=B,F=!1,B===1&&(D=undefined)},t.toggleZoom=function(){D||(D=t.slides.eq(t.slider.activeSlideIndex),P=D.find("img"),H=P.parent()),H.transition(300).transform("translate3d(0,0,0)"),B&&B!==1?(B=j=1,P.transition(300).transform("translate3d(0,0,0) scale(1)"),D=undefined):(B=j=t.params.maxZoom,P.transition(300).transform("translate3d(0,0,0) scale("+B+")"))};var I,q,R,U,z,W,X,V,J,K,Q={},G={},Y,Z,et,tt,nt,rt,it;t.onSlideTouchStart=function(e){if(I)return;n.device.os==="android"&&e.preventDefault(),I=!0,Q.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,Q.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY},t.onSlideTouchMove=function(e){t.slider.allowClick=!1;if(!I||!D)return;q||(J=P[0].offsetWidth,K=P[0].offsetHeight,Y=i.getTranslate(H[0],"x")||0,Z=i.getTranslate(H[0],"y")||0,H.transition(0));var n=J*B,r=K*B;if(n<t.slider.width&&r<t.slider.height)return;z=Math.min(t.slider.width/2-n/2,0),X=-z,W=Math.min(t.slider.height/2-r/2,0),V=-W,G.x=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX,G.y=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;if(!q&&!F)if(Math.floor(z)===Math.floor(Y)&&G.x<Q.x||Math.floor(X)===Math.floor(Y)&&G.x>Q.x){I=!1;return}e.stopPropagation(),q=!0,R=G.x-Q.x+Y,U=G.y-Q.y+Z,R<z&&(R=z+1-Math.pow(z-R+1,.8)),R>X&&(R=X-1+Math.pow(R-X+1,.8)),U<W&&(U=W+1-Math.pow(W-U+1,.8)),U>V&&(U=V-1+Math.pow(U-V+1,.8)),et||(et=G.x),rt||(rt=G.y),tt||(tt=Date.now()),nt=(G.x-et)/(Date.now()-tt)/2,it=(G.y-rt)/(Date.now()-tt)/2,Math.abs(G.x-et)<2&&(nt=0),Math.abs(G.y-rt)<2&&(it=0),et=G.x,rt=G.y,tt=Date.now(),H.transform("translate3d("+R+"px, "+U+"px,0)")},t.onSlideTouchEnd=function(e){if(!I||!q){I=!1,q=!1;return}I=!1,q=!1;var n=300,r=300,i=nt*n,s=R+i,o=it*r,u=U+o;nt!==0&&(n=Math.abs((s-R)/nt)),it!==0&&(r=Math.abs((u-U)/it));var a=Math.max(n,r);R=s,U=u;var f=J*B,l=K*B;z=Math.min(t.slider.width/2-f/2,0),X=-z,W=Math.min(t.slider.height/2-l/2,0),V=-W,R=Math.max(Math.min(R,X),z),U=Math.max(Math.min(U,V),W),H.transition(a).transform("translate3d("+R+"px, "+U+"px,0)")};var st=!1,ot=!0,ut,at,ft,lt=!1,ct,ht;return t.swipeCloseTouchStart=function(e,t){if(!ot)return;st=!0},t.swipeCloseTouchMove=function(e,n){if(!st)return;lt||(lt=!0,at=n.type==="touchmove"?n.targetTouches[0].pageY:n.pageY,ct=t.slider.slides.eq(t.slider.activeSlideIndex),ht=(new Date).getTime()),n.preventDefault(),ft=n.type==="touchmove"?n.targetTouches[0].pageY:n.pageY,ut=at-ft;var r=1-Math.abs(ut)/300;ct.transform("translate3d(0,"+ -ut+"px,0)"),t.slider.container.css("opacity",r).transition(0)},t.swipeCloseTouchEnd=function(e,r){st=!1;if(!lt){lt=!1;return}lt=!1,ot=!1;var i=Math.abs(ut),s=(new Date).getTime()-ht;if(s<300&&i>20||s>=300&&i>100){setTimeout(function(){t.params.type==="standalone"&&t.close(),t.params.type==="popup"&&n.closeModal(t.popup),t.params.onSwipeToClose&&t.params.onSwipeToClose(t),ot=!0},0);return}i!==0?ct.addClass("transitioning").transitionEnd(function(){ot=!0,ct.removeClass("transitioning")}):ot=!0,t.slider.container.css("opacity","").transition(""),ct.transform("")},t};n.photoBrowser=function(e){return new g(e)},n.initSearchbar=function(e){function v(){s.val("").trigger("change"),t.removeClass("searchbar-active searchbar-not-empty"),u.length>0&&u.css(d,-p+"px"),a&&r.removeClass("searchbar-overlay-active"),n.device.ios?setTimeout(function(){s.blur()},400):s.blur()}function m(){n.device.ios?setTimeout(function(){a&&!t.hasClass("searchbar-active")&&r.addClass("searchbar-overlay-active"),t.addClass("searchbar-active"),u.length>0&&u.css(d,"0px"),a.trigger("enableSearch")},400):(a&&!t.hasClass("searchbar-active")&&r.addClass("searchbar-overlay-active"),t.addClass("searchbar-active"),u.length>0&&u.css(d,"0px"),a.trigger("disableSearch"))}function g(){s.val("").trigger("change"),a.trigger("clearSearch")}function y(){setTimeout(function(){var e=s.val().trim();e.length===0?(t.removeClass("searchbar-not-empty"),a&&t.hasClass("searchbar-active")&&r.addClass("searchbar-overlay-active")):(t.addClass("searchbar-not-empty"),a&&t.hasClass("searchbar-active")&&r.removeClass("searchbar-overlay-active")),a.length>0&&f&&S(e)},0)}function b(e){e.preventDefault()}function w(e){var n=e?"off":"on";t[n]("submit",b),u[n]("click",v),r[n]("click",v),s[n]("focus",m),s[n]("change keydown keypress keyup",y),o[n]("click",g)}function E(){w(!0)}function S(e){var t=e.trim().toLowerCase().split(" ");a.find("li").removeClass("hidden-by-searchbar");var r=[];a.find("li").each(function(e,n){n=i(n);var s=n.find(f);if(s.length===0)return;var o;o=s.text().trim().toLowerCase();var u=0;for(var a=0;a<t.length;a++)o.indexOf(t[a])>=0&&u++;u!==t.length?n.addClass("hidden-by-searchbar"):r.push(n[0])}),n.params.searchbarHideDividers&&a.find(".item-divider, .list-group-title").each(function(){var e=i(this),t=e.nextAll("li"),n=!0;for(var r=0;r<t.length;r++){var s=i(t[r]);if(s.hasClass("list-group-title")||s.hasClass("item-divider"))break;s.hasClass("hidden-by-searchbar")||(n=!1)}n?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),n.params.searchbarHideGroups&&a.find(".list-group").each(function(){var e=i(this),t=e.find("li:not(.hidden-by-searchbar)");t.length===0?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),a.trigger("search",{query:e,foundItems:r}),r.length===0?(h.show(),c.hide()):(h.hide(),c.show())}function x(){E(),e.off("pageBeforeRemove",x)}e=i(e);var t=e.hasClass("searchbar")?e:e.find(".searchbar");if(t.length===0)return;e.hasClass("page")||(e=t.parents(".page").eq(0));var r=e.hasClass("page")?e.find(".searchbar-overlay"):i(".searchbar-overlay"),s=t.find('input[type="search"]'),o=t.find(".searchbar-clear"),u=t.find(".searchbar-cancel"),a=i(t.attr("data-search-list")),f=t.attr("data-search-in"),l=t.attr("data-search-by"),c=t.attr("data-searchbar-found");c?c=i(c):(c=e.find(".searchbar-found"),c.length===0&&(c=i(".searchbar-found")));var h=t.attr("data-searchbar-not-found");h?h=i(h):(h=e.find(".searchbar-not-found"),h.length===0&&(h=i(".searchbar-not-found")));var p,d=n.rtl?"margin-left":"margin-right";u.length>0&&(p=u.width(),u.css(d,-p+"px")),t[0].f7DestroySearchbar=E,w(),e.hasClass("page")&&e.on("pageBeforeRemove",x)},n.destroySearchbar=function(e){e=i(e);var t=e.hasClass("searchbar")?e:e.find(".searchbar");if(t.length===0)return;t[0].f7DestroySearchbar&&t[0].f7DestroySearchbar()},n.initMessagebar=function(e){function u(e){e.preventDefault()}function a(){n.css({height:""});var e=n[0].offsetHeight,i=e-n[0].clientHeight,u=n[0].scrollHeight;if(u+i>e){var a=u+i,f=s+(a-o),l=t.attr("data-max-height")||t.parents(".view")[0].offsetHeight-88;f>l&&(f=l,a=f-s+o),n.css("height",a+"px"),t.css("height",f+"px"),r.length>0&&(r.css("padding-bottom",f+"px"),r.scrollTop(r[0].scrollHeight-r[0].offsetHeight))}else r.length>0&&(t.css({height:""}),r.css({"padding-bottom":""}))}function l(e){clearTimeout(f),f=setTimeout(function(){a()},0)}function c(e){var r=e?"off":"on";t[r]("submit",u),n[r]("change keydown keypress keyup paste cut",l)}function h(){c(!0)}function p(){h(),e.off("pageBeforeRemove",p)}e=i(e);var t=e.hasClass("messagebar")?e:e.find(".messagebar");if(t.length===0)return;var n=t.find("textarea"),r=t.parents(".page").find(".page-content"),s=t[0].offsetHeight,o=n[0].offsetHeight,f;t[0].f7DestroyMessagebar=h,c(),e.hasClass("page")&&e.on("pageBeforeRemove",p)},n.destroyMessagebar=function(e){e=i(e);var t=e.hasClass("messagebar")?e:e.find(".messagebar");if(t.length===0)return;t[0].f7DestroyMessagebar&&t[0].f7DestroyMessagebar()},n.initMessages=function(e){var t=i(e),r=t.find(".messages");if(r.length===0)return;var s=t.find(".page-content");r.hasClass("new-messages-first")||(s[0].scrollTop=r.height()-s.height()),n.updateMessagesAngles(r)},n.addMessage=function(e){e=e||{},e.type=e.type||"sent";if(!e.text||e.length===0)return!1;var t=i(".messages-content");if(t.length===0)return!1;var r=t.find(".messages"),s=r.hasClass("new-messages-first"),o="";e.day&&(o+='<div class="messages-date">'+e.day+(e.time?",":"")+(e.time?" <span>"+e.time+"</span>":"")+"</div>");var u=e.text.indexOf("<img")>=0?"message-pic":"",a=e.avatar?"message-with-avatar":"",f="message message-"+e.type+u+" "+a+" message-appear";o+='<div class="'+f+'">'+(e.name?'<div class="message-name">'+e.name+"</div>":"")+'<div class="message-text">'+e.text+"</div>"+(e.avatar?'<div class="message-avatar" style="background-image:url('+e.avatar+')"></div>':"")+"</div>",s?r.prepend(o):r.append(o),n.updateMessagesAngles(r),n.scrollMessagesContainer(t)},n.updateMessagesAngles=function(e){e.find(".message").each(function(){var e=i(this);e.find(".message-text img").length>0&&e.addClass("message-pic"),e.find(".message-avatar").length>0&&e.addClass("message-with-avatar")}),e.find(".message-sent").each(function(){var e=i(this),t=e.next(".message-sent"),n=e.prev(".message-sent");t.length===0?e.addClass("message-last"):e.removeClass("message-last"),n.length===0?e.addClass("message-first"):e.removeClass("message-first"),n.length>0&&n.find(".message-name").length>0&&e.find(".message-name").length>0&&n.find(".message-name").text()!==e.find(".message-name").text()&&(n.addClass("message-last"),e.addClass("message-first"))}),e.find(".message-received").each(function(){var e=i(this),t=e.next(".message-received"),n=e.prev(".message-received");t.length===0?e.addClass("message-last"):e.removeClass("message-last"),n.length===0?e.addClass("message-first"):e.removeClass("message-first"),n.length>0&&n.find(".message-name").length>0&&e.find(".message-name").length>0&&n.find(".message-name").text()!==e.find(".message-name").text()&&(n.addClass("message-last"),e.addClass("message-first"))})},n.scrollMessagesContainer=function(e){e=i(e||".messages-content");if(e.length===0)return;var t=e.find(".messages"),n=t.hasClass("new-messages-first"),r=e[0].scrollTop,s=n?0:t.height()-e.height();if(s===r)return;e.scrollTop(s,300)};var y=function(e,t){var r={initialSlide:0,spaceBetween:0,speed:300,slidesPerView:1,direction:"horizontal",paginationHide:!0,slideClass:"slider-slide",slideActiveClass:"slider-slide-active",slideNextClass:"slider-slide-next",slidePrevClass:"slider-slide-prev",wrapperClass:"slider-wrapper",bulletClass:"slider-pagination-bullet",bulletActiveClass:"slider-pagination-active",preventClicks:!0,preventClicksPropagation:!0,autoplay:!1,autoplayDisableOnInteraction:!0};t=t||{};for(var s in r)typeof t[s]=="undefined"&&(t[s]=r[s]);var o=this;o.params=t,o.container=i(e);if(o.container.length===0)return;o.container[0].f7Slider=o,o.params.direction==="vertical"?o.container.addClass("slider-container-vertical"):o.container.addClass("slider-container-horizontal"),o.wrapper=o.container.children("."+o.params.wrapperClass),o.params.pagination&&(o.paginationContainer=i(o.params.pagination)),o.activeSlideIndex=o.previousSlideIndex=o.params.initialSlide||0;var u=o.params.direction==="horizontal",a=u?n.rtl?-1:1:1;o.updateSlides=function(){o.slides=o.wrapper.children("."+o.params.slideClass);if(o.params.spaceBetween!==0){var e=n.rtl?"margin-left":"margin-right";u?o.slides.css(e,o.params.spaceBetween+"px"):o.slides.css({marginBottom:o.params.spaceBetween+"px"})}if(o.params.slidesPerView>1){var r="(100% - "+(o.params.slidesPerView-1)*t.spaceBetween+"px)/"+o.params.slidesPerView;u?(o.slides.css("width","-webkit-calc("+r+")"),o.slides.css("width","-moz-calc("+r+")"),o.slides.css("width","calc("+r+")")):(o.slides.css("height","-webkit-calc("+r+")"),o.slides.css("height","-moz-calc("+r+")"),o.slides.css("height","calc("+r+")"))}},o.updatePagination=function(){if(o.paginationContainer&&o.paginationContainer.length>0){var e="";for(var t=0;t<o.slides.length-o.params.slidesPerView+1;t++)e+='<span class="'+o.params.bulletClass+'"></span>';o.paginationContainer.html(e),o.bullets=o.paginationContainer.find("."+o.params.bulletClass)}},o.updateSize=function(){o.width=o.container[0].offsetWidth,o.height=o.container[0].offsetHeight,o.size=u?o.width:o.height},o.attachEvents=function(e){var t=e?"off":"on";o.container[t](n.touchEvents.start,o.onTouchStart),o.container[t](n.touchEvents.move,o.onTouchMove),o.container[t](n.touchEvents.end,o.onTouchEnd),i(window)[t]("resize",o.onResize),o.params.nextButton&&i(o.params.nextButton)[t]("click",o.onClickNext),o.params.prevButton&&i(o.params.prevButton)[t]("click",o.onClickPrev),o.params.indexButton&&i(o.params.indexButton)[t]("click",o.onClickIndex),o.params.preventClicks&&o.container[t]("click",o.onClick)},o.detachEvents=function(){o.attachEvents(!0)},o.onResize=function(){o.updateSize(),o.slideTo(o.activeSlideIndex,0,!1)};var f,l,c={},h={},p,d,v,m=!1,g=Date.now(),y;o.allowClick=!0,o.onClick=function(e){o.params.preventClicks&&!o.allowClick&&(e.preventDefault(),o.params.preventClicksPropagation&&(e.stopPropagation(),e.stopImmediatePropagation()))},o.onTouchStart=function(e){f=!0,l=!1,d=undefined,c.x=h.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,c.y=h.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY,p=Date.now(),o.allowClick=!0,o.updateSize(),o.params.onTouchStart&&o.params.onTouchStart(o,e),e.type==="mousedown"&&e.preventDefault()},o.onTouchMove=function(e){o.params.onTouchMove&&o.params.onTouchMove(o,e),o.allowClick=!1;if(e.targetTouches&&e.targetTouches.length>1)return;h.x=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX,h.y=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY,typeof d=="undefined"&&(d=!!(d||Math.abs(h.y-c.y)>Math.abs(h.x-c.x))),(u&&d||!u&&!d)&&o.params.onOppositeTouchMove&&o.params.onOppositeTouchMove(o,e);if(!f)return;if(u&&d||!u&&!d){f=!1;return}o.params.onSliderMove&&o.params.onSliderMove(o,e),e.preventDefault(),e.stopPropagation(),l||(v=i.getTranslate(o.wrapper[0],u?"x":"y")*a,o.wrapper.transition(0),m&&o.onSlideChangeEnd(),t.autoplay&&w&&(o.params.autoplayDisableOnInteraction?o.stopAutoplay():b&&clearTimeout(b))),l=!0;var n=u?(h.x-c.x)*a:h.y-c.y;n>0&&o.activeSlideIndex===0?n=Math.pow(n,.85):n<0&&o.activeSlideIndex===o.slides.length-o.params.slidesPerView&&(n=-Math.pow(-n,.85));var r=u?(n+v)*a:0,s=u?0:n+v;o.wrapper.transform("translate3d("+r+"px, "+s+"px,0)")},o.onTouchEnd=function(e){o.params.onTouchEnd&&o.params.onTouchEnd(o,e);var t=Date.now(),n=t-p;o.allowClick&&(n<300&&t-g>300&&(y&&clearTimeout(y),y=setTimeout(function(){if(!o)return;o.params.paginationHide&&o.paginationContainer&&o.paginationContainer.toggleClass("slider-pagination-hidden"),o.params.onClick&&o.params.onClick(o,e)},300)),n<300&&t-g<300&&(y&&clearTimeout(y),o.params.onDoubleTap&&o.params.onDoubleTap(o,e)),o.params.onTap&&o.params.onTap(o,e)),g=Date.now();if(!f||!l){f=l=!1;return}f=l=!1;var r=u?(h.x-c.x)*a:h.y-c.y;Math.abs(r)<5&&n<300&&o.allowClick===!1&&(o.allowClick=!0),setTimeout(function(){if(!o)return;o.allowClick=!0},100);var i=o.params.autoplay&&w&&!o.params.autoplayDisableOnInteraction;if(r===0){i&&o.startAutoplay();return}var s=1,d=o.size/o.params.slidesPerView;o.params.slidesPerView>1&&(s=Math.abs((Math.abs(r)+d/2)/d)),i&&o.wrapper.transitionEnd(function(){o.startAutoplay()}),n>300?r<=-d/2?o.slideTo(o.activeSlideIndex+Math.floor(s)):r>d/2?o.slideTo(o.activeSlideIndex-Math.floor(s)):o.slideReset():Math.abs(r)<10?o.slideReset():r<0?o.slideTo(o.activeSlideIndex+Math.round(s)):o.slideTo(o.activeSlideIndex-Math.round(s))},o.slideTo=function(e,t,n){typeof e=="undefined"&&(e=0),e<0&&(e=0),e>o.slides.length-o.params.slidesPerView&&(e=o.slides.length-o.params.slidesPerView);var r=-(o.size+o.params.spaceBetween)*e/o.params.slidesPerView;typeof t=="undefined"&&(t=o.params.speed),o.previousSlideIndex=o.activeSlideIndex,o.activeSlideIndex=Math.round(e),o.isFirst=o.activeSlideIndex===0,o.isLast=o.activeSlideIndex===o.slides.length-o.params.slidesPerView,o.onSlideChangeStart();var i=u?r*a:0,s=u?0:r;t===0?(o.wrapper.transition(0).transform("translate3d("+i+"px,"+s+"px,0)"),n!==!1&&o.onSlideChangeEnd()):(m=!0,o.wrapper.transition(t).transform("translate3d("+i+"px,"+s+"px,0)").transitionEnd(function(){n!==!1&&o.onSlideChangeEnd()}))},o.updateClasses=function(){o.slides.removeClass(o.params.slideActiveClass+" "+o.params.slideNextClass+" "+o.params.slidePrevClass);var e=o.slides.eq(o.activeSlideIndex);e.addClass(o.params.slideActiveClass),e.next().addClass(o.params.slideNextClass),e.prev().addClass(o.params.slidePrevClass),o.bullets&&o.bullets.length>0&&(o.bullets.removeClass(o.params.bulletActiveClass),o.bullets.eq(o.activeSlideIndex).addClass(o.params.bulletActiveClass))},o.onSlideChangeStart=function(){o.updateClasses(),o.params.onSlideChangeStart&&o.params.onSlideChangeStart(o)},o.onSlideChangeEnd=function(){m=!1,o.wrapper.transition(0),o.params.onSlideChangeEnd&&o.params.onSlideChangeEnd(o)},o.slideNext=function(){o.slideTo(o.activeSlideIndex+1)},o.slidePrev=function(){o.slideTo(o.activeSlideIndex-1)},o.slideReset=function(){o.slideTo(o.activeSlideIndex)},o.onClickNext=function(e){e.preventDefault(),o.slideNext()},o.onClickPrev=function(e){e.preventDefault(),o.slidePrev()},o.onClickIndex=function(e){e.preventDefault(),o.slideTo(i(this).index())};var b,w;return o.startAutoplay=function(){if(!o.params.autoplay)return;w=!0,b&&clearTimeout(b),b=setTimeout(function(){o.wrapper.transitionEnd(function(){o.startAutoplay()});var e=o.activeSlideIndex+1;e>o.slides.length-o.params.slidesPerView&&(e=0),o.slideTo(e)},o.params.autoplay)},o.stopAutoplay=function(){w=!1,b&&clearTimeout(b)},o.resetAutoplay=function(){o.stopAutoplay(),o.startAutoplay()},o.init=function(){o.updateSlides(),o.updatePagination(),o.updateSize(),o.slideTo(o.params.initialSlide,0),o.attachEvents(),o.params.autoplay&&o.startAutoplay()},o.destroy=function(){o.detachEvents(),o.params.onDestroy&&o.params.onDestroy(),o=undefined},o.init(),o};n.slider=function(e,t){return new y(e,t)},n.initSlider=function(e){function s(e){function n(){e.destroy(),t.off("pageBeforeRemove",n)}t.on("pageBeforeRemove",n)}var t=i(e),r=t.find(".slider-init");if(r.length===0)return;for(var o=0;o<r.length;o++){var u=r.eq(o),a;u.data("slider")?a=JSON.parse(u.data("slider")):a={initialSlide:parseInt(u.data("initialSlide"),10)||undefined,spaceBetween:parseInt(u.data("spaceBetween"),10)||undefined,speed:parseInt(u.data("speed"),10)||undefined,slidesPerView:u.data("slidesPerView"),direction:u.data("direction"),pagination:u.data("pagination"),paginationHide:u.data("paginationHide")&&(u.data("paginationHide")==="true"?!0:!1),slideClass:u.data("slideClass"),slideActiveClass:u.data("slideActiveClass"),slideNextClass:u.data("slideNextClass"),slidePrevClass:u.data("slidePrevClass"),wrapperClass:u.data("wrapperClass"),bulletClass:u.data("bulletClass"),bulletActiveClass:u.data("bulletActiveClass"),nextButton:u.data("nextButton"),prevButton:u.data("prevButton"),indexButton:u.data("indexButton"),autoplay:u.data("autoplay")};var f=n.slider(u[0],a);s(f)}};var b=[];return n.initPlugins=function(){for(var e in n.plugins){var t=n.plugins[e](n,n.params[e]);t&&b.push(t)}},n.pluginHook=function(e){for(var t=0;t<b.length;t++)b[t].hooks&&e in b[t].hooks&&b[t].hooks[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},n.pluginPrevent=function(e){var t=!1;for(var n=0;n<b.length;n++)b[n].prevents&&e in b[n].prevents&&b[n].prevents[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])&&(t=!0);return t},n.pluginProcess=function(e,t){var n=t;for(var r=0;r<b.length;r++)b[r].preprocess&&process in b[r].preprocess&&(n=b[r].preprocess[process](t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]));return n},n.init=function(){n.initPlugins&&n.initPlugins(),n.getDeviceInfo&&n.getDeviceInfo(),n.initFastClicks&&n.params.fastClicks&&n.initFastClicks(),n.initClickEvents&&n.initClickEvents(),i(".page").each(function(){var e=i(this),t=e.parents("."+n.params.viewClass);if(t.length===0)return;var r=t[0].f7View||!1,s=r&&r.url?r.url:!1;t&&t.attr("data-page",e.attr("data-page")||undefined),n.pageInitCallback(r,this,s,"center")}),n.initResize&&n.initResize(),n.initPushState&&n.params.pushState&&n.initPushState(),n.initSwipeout&&n.params.swipeout&&n.initSwipeout(),n.initSortable&&n.params.sortable&&n.initSortable(),n.initSwipePanels&&n.params.swipePanel&&n.initSwipePanels(),n.params.onAppInit&&n.params.onAppInit(),n.pluginHook("appInit")},n.params.init&&n.init(),n};var e=function(){var e=function(e){var t=this,n=0;for(n=0;n<e.length;n++)t[n]=e[n];return t.length=e.length,this},t=function(t,n){var r=[],i=0;if(t&&!n&&t instanceof e)return t;if(t)if(typeof t=="string"){var s=(n||document).querySelectorAll(t);for(i=0;i<s.length;i++)r.push(s[i])}else if(t.nodeType||t===window||t===document)r.push(t);else if(t.length>0&&t[0].nodeType)for(i=0;i<t.length;i++)r.push(t[i]);return new e(r)};e.prototype={addClass:function(e){if(typeof e=="undefined")return this;var t=e.split(" ");for(var n=0;n<t.length;n++)for(var r=0;r<this.length;r++)this[r].classList.add(t[n]);return this},removeClass:function(e){if(typeof e=="undefined")return this.removeAttr("class");var t=e.split(" ");for(var n=0;n<t.length;n++)for(var r=0;r<this.length;r++)this[r].classList.remove(t[n]);return this},hasClass:function(e){return this[0]?this[0].classList.contains(e):!1},toggleClass:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++)for(var r=0;r<this.length;r++)this[r].classList.toggle(t[n]);return this},attr:function(e,t){if(typeof t=="undefined")return this[0]?this[0].getAttribute(e):undefined;for(var n=0;n<this.length;n++)this[n].setAttribute(e,t);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e)},prop:function(e,t){if(typeof t=="undefined")return this[0]?this[0][e]:undefined;for(var n=0;n<this.length;n++)this[n][e]=t;return this},data:function(e,t){if(typeof t=="undefined"){if(this[0]){var n=this[0].getAttribute("data-"+e);return n?n:this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[e]:undefined}return undefined}for(var r=0;r<this.length;r++){var i=this[r];i.dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t}return this},val:function(e){if(typeof e=="undefined")return this[0]?this[0].value:null;for(var t=0;t<this.length;t++)this[t].value=e;return this},transform:function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this},transition:function(e){typeof e!="string"&&(e+="ms");for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this},on:function(e,n,r){function i(e){var i=e.target;if(t(i).is(n))r.call(i,e);else{var s=t(i).parents();for(var o=0;o<s.length;o++)t(s[o]).is(n)&&r.call(s[o],e)}}var s=e.split(" "),o,u;for(o=0;o<this.length;o++)if(arguments.length===2||n===!1){arguments.length===2&&(r=arguments[1]);for(u=0;u<s.length;u++)this[o].addEventListener(s[u],r,!1)}else for(u=0;u<s.length;u++)this[o].dom7LiveListeners||(this[o].dom7LiveListeners=[]),this[o].dom7LiveListeners.push({listener:r,liveListener:i}),this[o].addEventListener(s[u],i,!1);return this},off:function(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++)for(var i=0;i<this.length;i++)if(arguments.length===3){var s=arguments[1],o=arguments[2];if(this[i].dom7LiveListeners)for(var u=0;u<this[i].dom7LiveListeners.length;u++)this[i].dom7LiveListeners[u].listener===o&&this[i].removeEventListener(n[r],this[i].dom7LiveListeners[u].liveListener,!1)}else this[i].removeEventListener(n[r],t,!1);return this},trigger:function(e,t){for(var n=0;n<this.length;n++){var r;try{r=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0})}catch(i){r=document.createEvent("Event"),r.initEvent(e,!0,!0),r.detail=t}this[n].dispatchEvent(r)}return this},transitionEnd:function(e){function s(r){e.call(this,r);for(n=0;n<t.length;n++)i.off(t[n],s)}var t=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n,r,i=this;if(e)for(n=0;n<t.length;n++)i.on(t[n],s);return this},animationEnd:function(e){function s(r){e(r);for(n=0;n<t.length;n++)i.off(t[n],s)}var t=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],n,r,i=this;if(e)for(n=0;n<t.length;n++)i.on(t[n],s);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width"))-parseFloat(this.css("padding-left"))-parseFloat(this.css("padding-right")):null},outerWidth:function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?this[0].offsetHeight-parseFloat(this.css("padding-top"))-parseFloat(this.css("padding-bottom")):null},outerHeight:function(e){return this.length>0?e?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),n=document.body,r=e.clientTop||n.clientTop||0,i=e.clientLeft||n.clientLeft||0,s=window.pageYOffset||e.scrollTop,o=window.pageXOffset||e.scrollLeft;return{top:t.top+s-r,left:t.left+o-i}}return null},hide:function(){for(var e=0;e<this.length;e++)this[e].style.display="none";return this},show:function(){for(var e=0;e<this.length;e++)this[e].style.display="block";return this},css:function(e,t){var n;if(arguments.length===1){if(typeof e!="string"){for(n=0;n<this.length;n++)for(var r in e)this[n].style[r]=e[r];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(arguments.length===2&&typeof e=="string"){for(n=0;n<this.length;n++)this[n].style[e]=t;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},html:function(e){if(typeof e=="undefined")return this[0]?this[0].innerHTML:undefined;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if(typeof e=="undefined")return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[0].textContent=e},is:function(n){if(!this[0])return!1;var r,i;if(typeof n=="string"){var s=this[0];if(s===document)return n===document;if(s===window)return n===window;if(s.matches)return s.matches(n);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(n);if(s.mozMatchesSelector)return s.mozMatchesSelector(n);if(s.msMatchesSelector)return s.msMatchesSelector(n);r=t(n);for(i=0;i<r.length;i++)if(r[i]===this[0])return!0;return!1}if(n===document)return this[0]===document;if(n===window)return this[0]===window;if(n.nodeType||n instanceof e){r=n.nodeType?[n]:n;for(i=0;i<r.length;i++)if(r[i]===this[0])return!0;return!1}return!1},indexOf:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t},index:function(){if(this[0]){var e=this[0],t=0;while((e=e.previousSibling)!==null)e.nodeType===1&&t++;return t}return undefined},eq:function(t){if(typeof t=="undefined")return this;var n=this.length,r;return t>n-1?new e([]):t<0?(r=n+t,r<0?new e([]):new e([this[r]])):new e([this[t]])},append:function(t){var n,r;for(n=0;n<this.length;n++)if(typeof t=="string"){var i=document.createElement("div");i.innerHTML=t;while(i.firstChild)this[n].appendChild(i.firstChild)}else if(t instanceof e)for(r=0;r<t.length;r++)this[n].appendChild(t[r]);else this[n].appendChild(t);return this},prepend:function(t){var n,r;for(n=0;n<this.length;n++)if(typeof t=="string"){var i=document.createElement("div");i.innerHTML=t;for(r=i.childNodes.length-1;r>=0;r--)this[n].insertBefore(i.childNodes[r],this[n].childNodes[0])}else if(t instanceof e)for(r=0;r<t.length;r++)this[n].insertBefore(t[r],this[n].childNodes[0]);else this[n].insertBefore(t,this[n].childNodes[0]);return this},insertBefore:function(e){var n=t(e);for(var r=0;r<this.length;r++)if(n.length===1)n[0].parentNode.insertBefore(this[r],n[0]);else if(n.length>1)for(var i=0;i<n.length;i++)n[i].parentNode.insertBefore(this[r].cloneNode(!0),n[i])},insertAfter:function(e){var n=t(e);for(var r=0;r<this.length;r++)if(n.length===1)n[0].parentNode.insertBefore(this[r],n[0].nextSibling);else if(n.length>1)for(var i=0;i<n.length;i++)n[i].parentNode.insertBefore(this[r].cloneNode(!0),n[i].nextSibling)},next:function(n){return this.length>0?n?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(n)?new e([this[0].nextElementSibling]):new e([]):this[0].nextElementSibling?new e([this[0].nextElementSibling]):new e([]):new e([])},nextAll:function(n){var r=[],i=this[0];if(!i)return new e([]);while(i.nextElementSibling){var s=i.nextElementSibling;n&&t(s).is(n)?r.push(s):r.push(s),i=s}return new e(r)},prev:function(n){return this.length>0?n?this[0].previousElementSibling&&t(this[0].previousElementSibling).is(n)?new e([this[0].previousElementSibling]):new e([]):this[0].previousElementSibling?new e([this[0].previousElementSibling]):new e([]):new e([])},prevAll:function(n){var r=[],i=this[0];if(!i)return new e([]);while(i.previousElementSibling){var s=i.previousElementSibling;n&&t(s).is(n)?r.push(s):r.push(s),i=s}return new e(r)},parent:function(e){var n=[];for(var r=0;r<this.length;r++)e?t(this[r].parentNode).is(e)&&n.push(this[r].parentNode):n.push(this[r].parentNode);return t(t.unique(n))},parents:function(e){var n=[];for(var r=0;r<this.length;r++){var i=this[r].parentNode;while(i)e?t(i).is(e)&&n.push(i):n.push(i),i=i.parentNode}return t(t.unique(n))},find:function(t){var n=[];for(var r=0;r<this.length;r++){var i=this[r].querySelectorAll(t);for(var s=0;s<i.length;s++)n.push(i[s])}return new e(n)},children:function(n){var r=[];for(var i=0;i<this.length;i++){var s=this[i].childNodes;for(var o=0;o<s.length;o++)n?s[o].nodeType===1&&t(s[o]).is(n)&&r.push(s[o]):s[o].nodeType===1&&r.push(s[o])}return new e(t.unique(r))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},detach:function(){return this.remove()}},function(){function r(t){e.prototype[t]=function(e){var r;if(typeof e=="undefined"){for(r=0;r<this.length;r++)n.indexOf(t)<0&&this[r][t]();return this}return this.on(t,e)}}var t="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),n="resize scroll".split(" ");for(var i=0;i<t.length;i++)r(t[i])}(),t.parseUrlQuery=function(e){var t={},n,r,i;if(e.indexOf("?")>=0){e=e.split("?")[1],r=e.split("&");for(n=0;n<r.length;n++)i=r[n].split("="),t[i[0]]=i[1];return t}return t},t.isArray=function(e){return Object.prototype.toString.apply(e)==="[object Array]"?!0:!1},t.unique=function(e){var t=[];for(var n=0;n<e.length;n++)t.indexOf(e[n])===-1&&t.push(e[n]);return t},t.trim=function(e){return e.trim()},t.serializeObject=function(e){if(typeof e=="string")return e;var n=[],r="&";for(var i in e)if(t.isArray(e[i])){var s=[];for(var o=0;o<e[i].length;o++)s.push(i+"="+e[i][o]);n.push(s.join(r))}else n.push(i+"="+e[i]);return n.join(r)},t.getTranslate=function(e,t){var n,r,i,s;return typeof t=="undefined"&&(t="x"),i=window.getComputedStyle(e,null),window.WebKitCSSMatrix?s=new WebKitCSSMatrix(i.webkitTransform==="none"?"":i.webkitTransform):(s=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=s.toString().split(",")),t==="x"&&(window.WebKitCSSMatrix?r=s.m41:n.length===16?r=parseFloat(n[12]):r=parseFloat(n[4])),t==="y"&&(window.WebKitCSSMatrix?r=s.m42:n.length===16?r=parseFloat(n[13]):r=parseFloat(n[5])),r||0},t.requestAnimationFrame=function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):window.setTimeout(e,1e3/60)},t.supportTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),t.fn=e.prototype,t.fn.scrollTo=function(e,n,r){return this.each(function(){function m(e){e===undefined&&(e=(new Date).getTime()),v===null&&(v=e);var n,u,a;p&&(c=s+(e-v)/r*(f-s)),d&&(h=o+(e-v)/r*(l-o)),p&&f>s&&c>=f&&(i.scrollTop=f,a=!0),p&&f<s&&c<=f&&(i.scrollTop=f,a=!0),d&&l>o&&h>=l&&(i.scrollLeft=l,a=!0),d&&l<o&&h<=l&&(i.scrollLeft=l,a=!0);if(a)return;p&&(i.scrollTop=c),d&&(i.scrollLeft=h),t.requestAnimationFrame(m)}var i=this,s,o,u,a,f,l,c,h,p=n>0||n===0,d=e>0||e===0;p&&(s=i.scrollTop,r||(i.scrollTop=n)),d&&(o=i.scrollLeft,r||(i.scrollLeft=e));if(!r)return;p&&(u=i.scrollHeight-i.offsetHeight,f=Math.max(Math.min(n,u),0)),d&&(a=i.scrollWidth-i.offsetWidth,l=Math.max(Math.min(e,a),0));var v=null;p&&f===s&&(p=!1),d&&l===o&&(d=!1),t.requestAnimationFrame(m)})},t.fn.scrollTop=function(e,t){var n=this;return typeof e=="undefined"?n.length>0?n[0].scrollTop:null:n.scrollTo(undefined,e,t)},t.fn.scrollLeft=function(e,t){var n=this;return typeof e=="undefined"?n.length>0?n[0].scrollLeft:null:n.scrollTo(e,undefined,t)};var n=0;return t.ajax=function(e){var r={method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded"};e.type&&(e.type=e.method);for(var i in r)i in e||(e[i]=r[i]);e.url||(e.url=window.location.toString());if((e.method==="GET"||e.method==="HEAD")&&e.data){var s;typeof e.data=="string"?e.data.indexOf("?")>=0?s=e.data.split("?")[1]:s=e.data:s=t.serializeObject(e.data),e.url.indexOf("?")>=0?e.url+="&"+s:e.url+="?"+s}if(e.dataType==="json"&&e.url.indexOf("callback=")>=0){var o="f7jsonp_"+Date.now()+n++,u,a=e.url.split("callback=");if(a[1].indexOf("&")>=0){var f=a[1].split("&").filter(function(e){return e.indexOf("=")>0}).join("&");u=a[0]+"callback="+o+(f.length>0?"&"+f:"")}else u=a[0]+"callback="+o;var l=document.createElement("script");l.type="text/javascript",l.src=u,window[o]=function(t){e.success&&e.success(t),l.parentNode.removeChild(l),l=null,delete window[o]},document.querySelector("head").appendChild(l);return}(e.method==="GET"||e.method==="HEAD")&&e.cache===!1&&(e.url+="_nocache="+Date.now());var c=new XMLHttpRequest;c.open(e.method,e.url,e.async,e.user,e.password);var h=null;if((e.method==="POST"||e.method==="PUT")&&e.data)if(e.processData){var p=[ArrayBuffer,Blob,Document,FormData];if(p.indexOf(e.data.constructor)>=0)h=e.data;else{var d="---------------------------"+Date.now().toString(16);e.contentType==="multipart/form-data"?c.setRequestHeader("Content-Type","multipart/form-data; boundary="+d):c.setRequestHeader("Content-Type",e.contentType),h="";var v=t.serializeObject(e.data);if(e.contentType==="multipart/form-data"){d="---------------------------"+Date.now().toString(16),v=v.split("&");var m=[];for(var g=0;g<v.length;g++)m.push('Content-Disposition: form-data; name="'+v[g].split("=")[0]+'"\r\n\r\n'+v[g].split("=")[1]+"\r\n");h="--"+d+"\r\n"+m.join("--"+d+"\r\n")+"--"+d+"--\r\n"}else h=e.contentType==="application/x-www-form-urlencoded"?v:v.replace(/&/g,"\r\n")}}else h=e.data;if(e.headers)for(var y in e.headers)c.setRequestHeader(y,e.headers[y]);typeof e.crossDomain=="undefined"&&(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!==window.location.host),e.crossDomain||c.setRequestHeader("X-Requested-With","XMLHttpRequest");if(e.xhrFields)for(var b in e.xhrFields)c[b]=e.xhrFields[b];return c.onload=function(n){if(c.status===200||c.status===0){t(document).trigger("ajaxSuccess",{xhr:c});if(e.success){var r=c.responseText;e.dataType==="json"&&(r=JSON.parse(r)),e.success(r,c.status,c)}}e.statusCode&&e.statusCode[c.status]&&e.statusCode[c.status](c),e.complete&&e.complete(c),t(document).trigger("ajaxComplete",{xhr:c})},c.onerror=function(n){t(document).trigger("ajaxError",{xhr:c}),e.error&&e.error(c)},e.start&&e.start(c),t(document).trigger("ajaxStart",{xhr:c}),c.send(h),c},function(){function n(e){t[e]=function(n,r,i){return t.ajax({url:n,method:e==="post"?"POST":"GET",data:typeof r=="function"?undefined:r,success:typeof r=="function"?r:i,dataType:e==="getJSON"?"json":undefined})}}var e="get post getJSON".split(" ");for(var r=0;r<e.length;r++)n(e[r])}(),t}();Framework7.$=e;var t=e;window.Dom7=e,Framework7.prototype.support=function(){var e={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)};return e}(),Framework7.prototype.device=function(){var t={},n=navigator.userAgent,r=e,i=n.match(/(Android);?[\s\/]+([\d.]+)?/),s=n.match(/(iPad).*OS\s([\d_]+)/),o=n.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&n.match(/(iPhone\sOS)\s([\d_]+)/);t.ios=t.android=t.iphone=t.ipad=!1,i&&(t.os="android",t.osVersion=i[2],t.android=!0);if(s||u||o)t.os="ios",t.ios=!0;u&&!o&&(t.osVersion=u[2].replace(/_/g,"."),t.iphone=!0),s&&(t.osVersion=s[2].replace(/_/g,"."),t.ipad=!0),o&&(t.osVersion=o[3]?o[3].replace(/_/g,"."):null,t.iphone=!0),t.webView=(u||s||o)&&n.match(/.*AppleWebKit(?!.*Safari)/i);if(t.os&&t.os==="ios"){var a=t.osVersion.split(".");t.minimalUi=!t.webView&&(o||u)&&(a[0]*1===7?a[1]*1>=1:a[0]*1>7)&&r('meta[name="viewport"]').length>0&&r('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var f=r(window).width(),l=r(window).height();t.statusBar=!1,t.webView&&(f===320&&l===568||f===568&&l===320||f===320&&l===480||f===480&&l===320||f===768&&l===1024||f===1024&&l===768)?t.statusBar=!0:t.statusBar=!1;var c=[];t.pixelRatio=window.devicePixelRatio||1,t.pixelRatio>=2&&c.push("retina");if(t.os){c.push(t.os,t.os+"-"+t.osVersion.split(".")[0],t.os+"-"+t.osVersion.replace(/\./g,"-"));if(t.os==="ios"){var h=parseInt(t.osVersion.split(".")[0],10);for(var p=h-1;p>=6;p--)c.push("ios-gt-"+p)}}return t.statusBar?c.push("with-statusbar-overlay"):r("html").removeClass("with-statusbar-overlay"),c.length>0&&r("html").addClass(c.join(" ")),t}(),Framework7.prototype.plugins={}})(),define("Framework7",function(e){return function(){var t,n;return t||e.Framework7}}(this)),define("GS",[],function(){var e=null,t={init:function(){e||(e={},e.currentUser={},localStorage.getItem("sid")&&(e.currentUser.sid=localStorage.getItem("sid")),localStorage.getItem("user")&&(e.currentUser=JSON.parse(localStorage.getItem("user"))))},getCurrentUser:function(){return e.currentUser},getSid:function(){var e=$$.parseUrlQuery(window.location.href||"");return e.sid||localStorage.getItem("sid")},setCurrentUser:function(t,n){e.currentUser=n,localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("sid",t)},removeCurrentUser:function(){e.currentUser={},localStorage.removeItem("user"),localStorage.removeItem("sid")},isLogin:function(){return e.currentUser&&localStorage.getItem("sid")}};return t.init(),t}),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s+".js"))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&(!e[i]&&t[i]&&(e[i]={}),r(e[i],t[i],n))}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.4",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":"")+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("nls/lang",{root:{},"zh-cn":!0,"en-us":!0}),define("utils/appFunc",["i18n!nls/lang"],function(e){var t=Dom7,n={isPhonegap:function(){return typeof cordova!="undefined"||typeof phonegap!="undefined"},isEmail:function(e){var t=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;return t.test(e)},getPageNameInUrl:function(e){e=e||"";var t=e.split(".");return t[0]},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},hideToolbar:function(e){return t(e).addClass("hidden-toolbar"),!0},showToolbar:function(e){var n=t(e);n.addClass("hiding-toolbar").removeClass("hidden-toolbar"),t(".toolbar").transitionEnd(function(){n.removeClass("hiding-toolbar")})},timeFormat:function(t){function f(e){return e<10?"0"+e:e}t*=1e3;var n,r,i,s,o=(new Date).getTime(),u=(o-t)/1e3;s=Math.round(u/86400),i=Math.round(u/3600),r=Math.round(u/60),n=Math.round(u);if(s>0&&s<2)return s+e.global.day_ago;if(s<=0&&i>0)return i+e.global.hour_ago;if(i<=0&&r>0)return r+e.global.minute_ago;if(r<=0&&n>=0)return e.global.just_now;var a=new Date;return a.setTime(t),a.getFullYear()+"-"+f(a.getMonth()+1)+"-"+f(a.getDate())+" "+f(a.getHours())+":"+f(a.getMinutes())},getCharLength:function(e){var t=0;for(var n=0;n<e.length;n++)e.charCodeAt(n)>255?t+=2:t+=1;return t},matchUrl:function(e){var t=/((http|ftp|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&;:\/~\+#]*[\w\-\@?^=%&;\/~\+#])?/g;return e=e.replace(t,function(e){return e.indexOf("http")!==-1||e.indexOf("ftp")!==-1?'<a href="#" onclick="event.stopPropagation();window.open(\''+e+"','_blank')\">"+e+"</a>":'<a href="#" onclick="event.stopPropagation();window.open(\'http://'+e+"','_blank')\">"+e+"</a>"}),e},bindEvents:function(e){for(var n in e)e[n].selector?t(e[n].element).on(e[n].event,e[n].selector,e[n].handler):t(e[n].element).on(e[n].event,e[n].handler)}};return n}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!GTPL",[],function(){return'<script id="timelineTemplate" type="text/template" >\n{{#weibo}}\n<li data-id="{{id}}" data-mid="{{mid}}" class="item-content card-content">\n    <div class="item-inner">\n        <div class="item-header">\n            <div class="avatar">\n                <img data-avatarid="{{avatar}}" src="style/img/avatar/avatar{{avatar}}.jpg">\n            </div>\n            <div class="detail">\n                <p class="nickname">{{nickname}}</p>\n                <p data-time="{{created_at}}" class="create-time">{{time}}</p>\n            </div>\n        </div>\n\n        <div class="click-content">\n\n            <div class="item-subtitle">\n                {{&finalText}}\n            </div>\n\n            {{#image}}\n            <div class="item-image">\n                <img src="{{.}}" alt="">\n            </div>\n            {{/image}}\n\n        </div>\n\n\n        <div class="item-tools">\n            <ul>\n                <li><i class="icon ios7-redo-outline"></i><span class="text">{{i18n.forward}}</span></li>\n                <li class="tool-line"></li>\n                <li><a href="page/item.html?id={{id}}"><i class="icon ios7-chatbubble-outline"></i><span class="text">{{i18n.comment}}</span></a></li>\n                <li class="tool-line"></li>\n                <li><i class="icon ios7-heart-outline"></i><span class="text">{{i18n.like}}</span></li>\n            </ul>\n        </div>\n\n    </div>\n</li>\n{{/weibo}}\n</script>\n\n<script id="itemTemplate" type="text/template" >\n    <div class="item-header">\n        <div class="avatar">\n            <img src="style/img/avatar/avatar{{avatar}}.jpg">\n        </div>\n        <div class="detail">\n            <p class="nickname">{{nickname}}</p>\n            <p data-time="{{created_at}}" class="create-time">{{time}}</p>\n        </div>\n    </div>\n<div class="item-subtitle">\n{{&text}}\n</div>\n{{#image}}\n<div class="item-image">\n  <img src="{{image}}" alt="">\n</div>\n{{/image}}\n</script>\n\n<script id="commentsTemplate" type="text/template" >\n{{#comments}}\n<li class="comment-item">\n    <div class="avatar">\n      <img src="style/img/avatar/avatar{{avatar}}.jpg" alt="">\n    </div>\n    <div class="comment-detail">\n      <div class="name">{{name}}</div>\n      <div class="text">{{text}}</div>\n      <div class="time">{{rtime}}</div>\n    </div>\n</li>\n{{/comments}}\n{{^comments}}\n<div class="none-comment">\n  <i class="icon ios7-chatboxes-outline"></i>\n  <p>{{emptyComment}}</p>\n</div> \n{{/comments}}\n</script>\n\n<script id="commentPopupTemplate" type="text/template">\n    <div class="popup comment-popup">\n        <div class="view navbar-fixed">\n            <div class="page">\n                <div class="navbar">\n                    <div class="navbar-inner">\n                        <div class="left"><a href="#" class="link close-popup">{{cancel}}</a></div>\n                        <div class="center">{{title}}</div>\n                        <div class="right"><a id="commentBtn" href="#" class="link orange">{{send}}</a></div>\n                    </div>\n                </div>\n                <div class="page-content message-content">\n\n                    <div class="message-input">\n                        <textarea id="commentText" placeholder="{{placeholder}}"></textarea>\n                    </div>\n\n                    <div class="message-tools">\n                        <ul>\n                            <li><i class="icon ios7-emotion"></i></li>\n                            <li><i class="icon ios7-at-outline"></i></li>\n                        </ul>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n\n<script id="sendPopupTemplate" type="text/template">\n    <div class="send-popup popup">\n        <div class="view navbar-fixed">\n            <div class="page">\n                <div class="navbar">\n                    <div class="navbar-inner">\n                        <div class="left"><a href="#" class="link close-popup">{{cancel}}</a></div>\n                        <div class="center">{{senTweet}}</div>\n                        <div class="right"><a id="sendWeiboBtn" href="#" class="link orange">{{send}}</a></div>\n                    </div>\n                </div>\n                <div class="page-content message-content">\n\n                    <div class="message-input">\n                        <textarea id="messageText" placeholder="{{sendPlaceholder}}"></textarea>\n                    </div>\n\n                    <div class="message-tools">\n                        <ul>\n                            <li class="camera image-upload">\n                                <i class="icon ios7-camera-outline"></i>\n                            </li>\n                            <li class="photoalbum image-upload">\n                                <i class="icon ios7-pic"></i>\n                            </li>\n                            <li><i class="icon ios7-emotion"></i></li>\n                            <li><i class="icon ios7-at-outline"></i></li>\n                            <li class="get-position"><i class="icon ios7-dingxiang"></i></li>\n                        </ul>\n                    </div>\n\n                    <div id="geoInfo" class="geo-info">\n                        <div class="location"><i class="icon preloader"></i><span class="info">{{loadingGeo}}</span></div>\n                        <div class="close"><i class="icon ios7-close"></i></div>\n                    </div>\n\n                    <div id="uploadPicPreview" class="upload-pic-preview">\n                        <img src="" alt="" />\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n\n<script id="settingTemplate" type="text/template">\n    <div class="page-content">\n        <div class="setting-page list-block">\n            <ul>\n                <li>\n                    <div class="item-content">\n                        <div class="item-inner user-info">\n                            <div class="avatar">\n                                <img src="{{avatarUrl}}" alt="">\n                            </div>\n                            <div class="user-detail">\n                                <div class="name">{{i18nNickName}}: {{nickName}}</div>\n                                <div class="point">{{i18nPoints}}: {{points}}</div>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n                <li>\n                    <a href="page/feedback.html" class="item-link">\n                        <div class="item-content">\n                            <div class="item-media feedback spring"></div>\n                            <div class="item-inner">\n                                <div class="item-title">{{feedBack}}</div>\n                            </div>\n                        </div>\n                    </a>\n                </li>\n                <li>\n                    <a href="#" class="update-button item-link">\n                        <div class="item-content">\n                            <div class="item-media update spring"></div>\n                            <div class="item-inner">\n                                <div class="item-title">{{checkUpdate}}</div>\n                            </div>\n                        </div>\n                    </a>\n                </li>\n                <li>\n                    <a href="page/language.html?from=setting" class="item-link">\n                        <div class="item-content">\n                            <div class="item-media language">\n                                <i class="icon ios7-world-outline"></i>\n                            </div>\n                            <div class="item-inner">\n                                <div class="item-title">{{language}}</div>\n                            </div>\n                        </div>\n                    </a>\n                </li>\n                <li>\n                    <a href="page/about.html" class="item-link">\n                        <div class="item-content">\n                            <div class="item-media about spring"></div>\n                            <div class="item-inner">\n                                <div class="item-title">{{about}}</div>\n                            </div>\n                        </div>\n                    </a>\n                </li>\n            </ul>\n            <a href="#" class="button button-big button-cancel logout-button  color-white">{{loginOut}}</a>\n        </div>\n    </div>\n</script>\n\n<script id="contactListTemplate" type="text/template">\n    {{#contacts}}\n    {{#header}}\n    <li class="list-group-title">{{header}}</li>\n    {{/header}}\n    <li class="contact-item">\n        <a href="page/message.html?nickname={{nickname}}" class="item-link">\n            <div class="item-content">\n                <div class="item-media"><img src="style/img/avatar/avatar{{avatar}}.jpg" width="44"></div>\n                <div class="item-inner">\n                    <div class="item-title-row">\n                        <div class="item-title">{{nickname}}</div>\n                    </div>\n                    <div class="item-subtitle">{{location}}</div>\n                </div>\n            </div>\n        </a>\n    </li>\n    {{/contacts}}\n</script>\n\n<script id="messageTemplate" type="text/template">\n    {{#message}}\n    {{#date}}\n    <div class="messages-date">{{date}}</div>\n    {{/date}}\n    {{#image}}\n    <div class="message message-{{from}} message-pic ">\n        <div class="message-text"><img src="{{&text}}"/></div>\n    </div>\n    {{/image}}\n    {{^image}}\n    <div class="message message-{{from}} message-last">\n        <div class="message-text">{{text}}</div>\n    </div>\n    {{/image}}\n    {{/message}}\n</script>'}),function(e,t){if(typeof exports=="object"&&exports)t(exports);else{var n={};t(n),typeof define=="function"&&define.amd?define("mustache",n):e.Mustache=n}}(this,function(e){function n(e,n){return t.call(e,n)}function i(e){return!n(r,e)}function u(e){return typeof e=="function"}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function l(e){return String(e).replace(/[&<>"'\/]/g,function(e){return f[e]})}function c(e){if(!o(e)||e.length!==2)throw new Error("Invalid tags: "+e);return[new RegExp(a(e[0])+"\\s*"),new RegExp("\\s*"+a(e[1]))]}function g(t,n){function E(){if(l&&!g)while(f.length)delete u[f.pop()];else f=[];l=!1,g=!1}n=n||e.tags,t=t||"",typeof n=="string"&&(n=n.split(p));var r=c(n),s=new w(t),o=[],u=[],f=[],l=!1,g=!1,S,x,T,N,C,k;while(!s.eos()){S=s.pos,T=s.scanUntil(r[0]);if(T)for(var L=0,A=T.length;L<A;++L)N=T.charAt(L),i(N)?f.push(u.length):g=!0,u.push(["text",N,S,S+1]),S+=1,N==="\n"&&E();if(!s.scan(r[0]))break;l=!0,x=s.scan(m)||"name",s.scan(h),x==="="?(T=s.scanUntil(d),s.scan(d),s.scanUntil(r[1])):x==="{"?(T=s.scanUntil(new RegExp("\\s*"+a("}"+n[1]))),s.scan(v),s.scanUntil(r[1]),x="&"):T=s.scanUntil(r[1]);if(!s.scan(r[1]))throw new Error("Unclosed tag at "+s.pos);C=[x,T,S,s.pos],u.push(C);if(x==="#"||x==="^")o.push(C);else if(x==="/"){k=o.pop();if(!k)throw new Error('Unopened section "'+T+'" at '+S);if(k[1]!==T)throw new Error('Unclosed section "'+k[1]+'" at '+S)}else x==="name"||x==="{"||x==="&"?g=!0:x==="="&&(r=c(n=T.split(p)))}k=o.pop();if(k)throw new Error('Unclosed section "'+k[1]+'" at '+s.pos);return b(y(u))}function y(e){var t=[],n,r;for(var i=0,s=e.length;i<s;++i)n=e[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function b(e){var t=[],n=t,r=[],i,s;for(var o=0,u=e.length;o<u;++o){i=e[o];switch(i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":s=r.pop(),s[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function w(e){this.string=e,this.tail=e,this.pos=0}function E(e,t){this.view=e==null?{}:e,this.cache={".":this.view},this.parent=t}function S(){this.cache={}}var t=RegExp.prototype.test,r=/\S/,s=Object.prototype.toString,o=Array.isArray||function(e){return s.call(e)==="[object Array]"},f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},h=/\s*/,p=/\s+/,d=/\s*=/,v=/\s*\}/,m=/#|\^|\/|>|\{|&|=|!/;w.prototype.eos=function(){return this.tail===""},w.prototype.scan=function(e){var t=this.tail.match(e);if(t&&t.index===0){var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},w.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n},E.prototype.push=function(e){return new E(e,this)},E.prototype.lookup=function(e){var t;if(e in this.cache)t=this.cache[e];else{var n=this;while(n){if(e.indexOf(".")>0){t=n.view;var r=e.split("."),i=0;while(t!=null&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}this.cache[e]=t}return u(t)&&(t=t.call(this.view)),t},S.prototype.clearCache=function(){this.cache={}},S.prototype.parse=function(e,t){var n=this.cache,r=n[e];return r==null&&(r=n[e]=g(e,t)),r},S.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof E?t:new E(t);return this.renderTokens(r,i,n,e)},S.prototype.renderTokens=function(t,n,r,i){function f(e){return a.render(e,n,r)}var s="",a=this,l,c;for(var h=0,p=t.length;h<p;++h){l=t[h];switch(l[0]){case"#":c=n.lookup(l[1]);if(!c)continue;if(o(c))for(var d=0,v=c.length;d<v;++d)s+=this.renderTokens(l[4],n.push(c[d]),r,i);else if(typeof c=="object"||typeof c=="string")s+=this.renderTokens(l[4],n.push(c),r,i);else if(u(c)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,i.slice(l[3],l[5]),f),c!=null&&(s+=c)}else s+=this.renderTokens(l[4],n,r,i);break;case"^":c=n.lookup(l[1]);if(!c||o(c)&&c.length===0)s+=this.renderTokens(l[4],n,r,i);break;case">":if(!r)continue;c=u(r)?r(l[1]):r[l[1]],c!=null&&(s+=this.renderTokens(this.parse(c),n,r,c));break;case"&":c=n.lookup(l[1]),c!=null&&(s+=c);break;case"name":c=n.lookup(l[1]),c!=null&&(s+=e.escape(c));break;case"text":s+=l[1]}}return s},e.name="mustache.js",e.version="0.8.1",e.tags=["{{","}}"];var x=new S;e.clearCache=function(){return x.clearCache()},e.parse=function(e,t){return x.parse(e,t)},e.render=function(e,t,n){return x.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(!u(i))return s;i(s)},e.escape=l,e.Scanner=w,e.Context=E,e.Writer=S}),define("utils/tplManager",["text!GTPL","mustache"],function(e,t){var n=Dom7,r={init:function(){n("body").append(e)},loadTpl:function(e){var t=n("#"+e).html();return t},renderRemoteTpl:function(e,r,i){e=e||"",n.get("page/"+e+".tpl.html",function(e){var n=t.render(e,r);typeof (i==="function")?i(n):null})},renderTpl:function(e,n){var r=t.render(e,n);return r},renderTplById:function(e,n){var r=this.loadTpl(e),i=t.render(r,n);return i}};return r.init(),r}),define("view/appView",["utils/appFunc","i18n!nls/lang","utils/tplManager"],function(e,t,n){var r={i18next:function(e){var i=[];i.i=t.app.name;var s=n.renderTpl(e,i);return $$(".views .i18n").each(function(){var e,t=$$(this).data("i18n"),n=t.split("]");if(n.length>1){var i=n[0].replace("[","");e=r.i18nValue(n[1]),$$(this).attr(i,e)}else e=r.i18nValue(t),$$(this).html(e)}),s},i18nValue:function(e){var n=e.split("."),r;for(var i=0,s=n.length;i<s;i++)r!=null?r=r[n[i]]:r=t[n[i]];return r},showToolbar:function(){e.showToolbar(".views")},hideToolbar:function(){e.hideToolbar(".views")},photoBrowser:function(){var e=$$(this).attr("src"),n=hiApp.photoBrowser({photos:[e],toolbar:!1,backLinkText:t.global.close});n.open()}};return r}),define("view/loginView",["utils/appFunc","i18n!nls/lang","utils/tplManager"],function(e,t,n){var r={init:function(t){e.hideToolbar(".views"),e.bindEvents(t.bindings)},i18next:function(e){var r=[];r.appName=t.app.name,r.loginnamePlaceholder=t.login.loginname_placeholder,r.passwordPlaceholder=t.login.password_placeholder,r.loginBtn=t.login.login_btn,r.signUp=t.login.sign_up,r.forgotPwd=t.login.forgot_pwd,r.language=t.global.language;var i=n.renderTpl(e,r);return i}};return r}),define("view/settingView",["utils/appFunc","utils/tplManager","GS","i18n!nls/lang"],function(e,t,n,r){var i={init:function(t){e.bindEvents(t.bindings)},renderSetting:function(n){var s=[];s.avatarUrl=n.avatarUrl,s.nickName=n.nickName,s.points=n.points,s.i18nNickName=r.setting.nickname,s.i18nPoints=r.setting.points,s.feedBack=r.setting.feed_back,s.checkUpdate=r.setting.check_update,s.about=r.setting.about,s.language=r.global.language,s.loginOut=r.setting.login_out;var o=t.renderTplById("settingTemplate",s);$$('#settingView .page[data-page="setting"]').html(o);var u=[{element:".logout-button",event:"click",handler:i.logOut},{element:"#settingView .update-button",event:"click",handler:i.checkVersion}];e.bindEvents(u),hiApp.hideIndicator()},logOut:function(){hiApp.confirm(r.setting.confirm_logout,function(){n.removeCurrentUser(),mainView.loadPage("page/login.html"),hiApp.showTab("#ourView")})},checkVersion:function(){var e=$CONFIG.version,t=$CONFIG.release_time;hiApp.alert(r.setting.current_version+" V"+e+"<br/>[ "+t+" ]")}};return i}),define("view/aboutView",["utils/appFunc","i18n!nls/lang","utils/tplManager"],function(e,t,n){var r={init:function(t){e.bindEvents(t.bindings);var n=$CONFIG.version;$$(".my-product .version").html("V"+n+" For Love"),e.hideToolbar(".views")},i18next:function(e){var r=[];r.appName=t.app.name,r.about=t.setting.about;var i=n.renderTpl(e,r);return i}};return r}),define("view/feedbackView",["utils/appFunc","i18n!nls/lang","utils/tplManager"],function(e,t,n){var r={init:function(t){e.bindEvents(t.bindings),e.hideToolbar(".views")},sendFeedback:function(){hiApp.showPreloader(t.index.sending),setTimeout(function(){hiApp.hidePreloader(),hiApp.alert(t.setting.feed_back_result)},1e3)},i18next:function(e){var r=[];r.feedBack=t.setting.feed_back,r.feedBackPlaceholder=t.setting.feed_back_placeholder;var i=n.renderTpl(e,r);return i}};return r}),define("view/timelineView",["utils/appFunc","utils/tplManager","i18n!nls/lang"],function(e,t,n){var r={init:function(){e.showToolbar(".views"),$$("#ourView .pull-to-refresh-layer").show(),hiApp.showIndicator()},getTimeline:function(e){var n=this.renderDataFunc({data:e}),r=t.renderTplById("timelineTemplate",n);$$("#ourView").find(".time-line-content").html(r),hiApp.hideIndicator();var i=$$("#ourView").find(".pull-to-refresh-content");i.data("scrollLoading","unloading")},renderDataFunc:function(t){t=t||{};var r={forward:n.timeline.forward,comment:n.timeline.comment,like:n.timeline.like},i={i18n:r,weibo:t.data,finalText:function(){return e.matchUrl(this.text)},image:function(){var e=this.original_pic||"";if(e.length>2){var t=e.replace(/large/,"thumbnail");return t}return!1},time:function(){return e.timeFormat(this.created_at)}};return i},refreshItemTime:function(){$$("#ourView").find(".item-header .detail .create-time").each(function(){var t=e.timeFormat($$(this).data("time"));$$(this).html(t)})},refreshTimeline:function(e){this.refreshItemTime();var i=$$("#ourView").find(".time-line-content .item-content").eq(0).data("id");setTimeout(function(){$$("#ourView .refresh-click").find("i").removeClass("ios7-reloading");if(parseInt(i)===48)return r.showLoadResult(n.index.nothing_loaded),hiApp.pullToRefreshDone(),!1;var s=e.length,o=r.renderDataFunc({data:e}),u;s>=15?(u=t.renderTplById("timelineTemplate",o),$$("#ourView").find(".time-line-content").html(u)):s>0?(u=t.renderTplById("timelineTemplate",o),$$("#ourView").find(".time-line-content").prepend(u)):r.showLoadResult(n.index.nothing_loaded),hiApp.pullToRefreshDone()},1500)},infiniteTimeline:function(e){e=e||{},hiApp.showIndicator();var n=e.$dom,r=n.data("scrollLoading");if(r==="loading")return;n.data("scrollLoading","loading");var i=e.data,s=n.find(".time-line-content .item-content"),o=s.length,u=s.eq(o-1).data("id");if(parseInt(u)===24)hiApp.detachInfiniteScroll(n),hiApp.hideIndicator();else{var a=this.renderDataFunc({data:i}),f=t.renderTplById("timelineTemplate",a);setTimeout(function(){n.data("scrollLoading","unloading"),$$("#ourView").find(".time-line-content").append(f),hiApp.hideIndicator()},1500)}},refreshTimelineByClick:function(){setTimeout(function(){$$("#ourView .refresh-click ").find("i").addClass("ios7-reloading")},350),$$("#ourView .pull-to-refresh-content").scrollTop(0,300),hiApp.pullToRefreshTrigger("#ourview")},showLoadResult:function(e){setTimeout(function(){$$("#ourView .load-result").html(e).css("opacity","1").transition(1e3),setTimeout(function(){$$("#ourView .load-result").css("opacity","0").transition(1e3)},2100)},400)},openItemPage:function(e){if(e.target.nodeName!=="DIV")return!1;var t=$$(this).parents(".item-content").data("id");mainView.loadPage("page/item.html?id="+t)}};return r}),define("view/itemView",["utils/appFunc","i18n!nls/lang","utils/tplManager"],function(e,t,n){var r={init:function(t){e.hideToolbar(".views"),e.bindEvents(t.bindings);var n=t.query.id;this.getItem(n)},getItem:function(t){var r=$$('.time-line-content .item-content[data-id="'+t+'"]'),i=[];i.id=r.data("id"),i.nickname=r.find(".item-header .detail .nickname").html(),i.avatar=r.find(".item-header .avatar>img").data("avatarid"),i.time=e.timeFormat(r.find(".item-header .detail .create-time").data("time")),i.text=r.find(".item-subtitle").html(),r.find(".item-image img")[0]&&(i.image=r.find(".item-image img").attr("src"));var s=n.renderTplById("itemTemplate",i);$$("#itemContent").html(s)},i18next:function(e){var r=[];r.back=t.global.back,r.title=t.item.title,r.comment=t.timeline.comment,r.forward=t.timeline.forward;var i=n.renderTpl(e,r);return i}};return r}),define("components/networkStatus",[],function(){var e={checkConnection:function(){var e=navigator.connection.type,t={};return t[Connection.UNKNOWN]="UNKNOWN",t[Connection.ETHERNET]="ETHERNET",t[Connection.WIFI]="WIFI",t[Connection.CELL_2G]="CELL_2G",t[Connection.CELL_3G]="CELL_3G",t[Connection.CELL_4G]="CELL_4G",t[Connection.CELL]="CELL",t[Connection.NONE]="NoNetwork",t[e]}};return e}),define("utils/xhr",["utils/appFunc","i18n!nls/lang","components/networkStatus"],function(e,t,n){var r={search:function(e,t){for(var n=0;n<t.length;n++)if(t[n].code===e)return t[n];return!1},getRequestURL:function(t){var n=t.query||{},r=t.func||"",i="api/"+r+".json"+(e.isEmpty(n)?"":"?"),s;for(s in n)i+=s+"="+n[s]+"&";return i.replace(/&$/gi,"")},simpleCall:function(i,s){i=i||{},i.data=i.data?i.data:"",i.method=i.method||"GET";if(e.isPhonegap()){var o=n.checkConnection();if(o==="NoNetwork")return hiApp.alert(t.error.no_network,function(){hiApp.hideIndicator(),hiApp.hidePreloader()}),!1}$$.ajax({url:r.getRequestURL(i),method:i.method,data:i.data,success:function(e){e=e?JSON.parse(e):"";var t=[{code:1e4,message:"Your session is invalid, please login again",path:"/"},{code:10001,message:"Unknown error,please login again",path:"tpl/login.html"},{code:20001,message:"User name or password does not match",path:"/"}],n=r.search(e.err_code,t);n?hiApp.alert(n.message,function(){n.path!=="/"&&mainView.loadPage(n.path),hiApp.hideIndicator(),hiApp.hidePreloader()}):typeof s=="function"?s(e):""}})}};return r}),define("components/geolocation",["GS","i18n!nls/lang","utils/xhr"],function(e,t,n){var r=null,i=null,s={initGeo:function(){$$("#geoInfo").removeClass("show").hide(),$$("#geoInfo .location>i").removeClass("ios7-location-outline").addClass("preloader"),$$("#geoInfo .location>span").html(t.geo.loading_geo),r=null,i=null},catchGeoInfo:function(){$$("#geoInfo").addClass("show").show(),navigator.geolocation?navigator.geolocation.getCurrentPosition(s.showPosition,s.showGeoError):$$("#geoInfo .location").html(t.geo.position_unavailable)},showPosition:function(e){var t=e.coords.latitude,n=e.coords.longitude;$$("#geoInfo .location>i").removeClass("preloader").addClass("ios7-location-outline"),$$("#geoInfo .location>span").html(Math.round(t*1e4)/1e4+"/"+Math.round(n*1e4)/1e4),r=t,i=n},showGeoError:function(e){switch(e.code){case e.PERMISSION_DENIED:$$("#geoInfo .location").html(t.geo.permission_denied);break;case e.POSITION_UNAVAILABLE:$$("#geoInfo .location").html(t.geo.position_unavailable);break;case e.TIMEOUT:$$("#geoInfo .location").html(t.geo.timeout);break;case e.UNKNOWN_ERROR:$$("#geoInfo .location").html(t.error.unknown_error)}},getGeo:function(){return{lat:r,"long":i}},cleanGeo:function(){hiApp.confirm(t.geo.confirm_clean_geo,s.initGeo)}};return s}),define("components/fileTransfer",["GS","i18n!nls/lang"],function(e,t){var n,r={startUpload:function(e){var i="http://up.qiniu.com/",s='<div id="progress" class="progress"><span class="progress-bar"></span></div>';hiApp.modal({title:t.camera.image_uploading+' <span class="percent"></span>',text:s,buttons:[{text:t.global.cancel,onClick:r.abortUpload}]});var o=new FileUploadOptions;o.fileKey="upfile",o.fileName=e.substr(e.lastIndexOf("/")+1),o.mimeType="image/jpeg",o.params={},n=new FileTransfer,n.upload(e,encodeURI(i),r.uploadSuccess,r.uploadFail,o),n.onprogress=r.onprogress},uploadSuccess:function(e){hiApp.closeModal(".modal"),navigator.camera.cleanup();var t=e.response?JSON.parse(e.response):"";hiApp.alert(t)},uploadFail:function(e){hiApp.closeModal(".modal");var n;switch(e.code){case FileTransferError.FILE_NOT_FOUND_ERR:n=t.camera.file_not_found_err;break;case FileTransferError.INVALID_URL_ERR:n=t.camera.invalid_url_err;break;case FileTransferError.CONNECTION_ERR:n=t.camera.connection_err;break;case FileTransferError.ABORT_ERR:n=t.camera.abort_err;break;case FileTransferError.NOT_MODIFIED_ERR:n=t.camera.not_modified_err}hiApp.alert(n)},onprogress:function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);$$("#progress").parents(".modal-inner").find(".modal-title .percent").html(t+"%"),$$("#progress").find(".progress-bar").css("width",t+"%")}},abortUpload:function(){n.abort()}};return r}),define("components/camera",["GS","i18n!nls/lang","utils/appFunc","components/networkStatus","components/fileTransfer"],function(e,t,n,r,i){var s={getPicture:function(){if(!n.isPhonegap())return hiApp.alert(t.error.phonegap_only),!1;var e=$$(this),i=r.checkConnection(),o,u;i==="WIFI"?o=80:o=50,e.hasClass("camera")?u=Camera.PictureSourceType.CAMERA:u=Camera.PictureSourceType.PHOTOLIBRARY;var a={quality:o,allowEdit:!1,sourceType:u,mediaType:Camera.MediaType.PICTURE,targetWidth:1280,targetHeight:1920};navigator.camera.getPicture(s.cameraSuccess,s.cameraError,a)},cameraSuccess:function(e){$$("#uploadPicPreview>img").attr("src",e),$$("#uploadPicPreview").show()},cameraError:function(e){setTimeout(function(){e!=="no image selected"&&hiApp.alert(e)},500)},clearCache:function(){navigator.camera.cleanup()},startUpload:function(e){i.startUpload(e)}};return s}),define("view/postView",["utils/appFunc","i18n!nls/lang","utils/tplManager","components/geolocation","components/camera"],function(e,t,n,r,i){var s={openSendPopup:function(){var o=[];o.cancel=t.global.cancel,o.send=t.global.send,o.senTweet=t.index.sen_tweet,o.sendPlaceholder=t.index.send_placeholder,o.loadingGeo=t.geo.loading_geo;var u=n.renderTplById("sendPopupTemplate",o);hiApp.popup($$.trim(u));var a=[{element:"#sendWeiboBtn",event:"click",handler:s.postMsg},{element:"div.message-tools .get-position",event:"click",handler:r.catchGeoInfo},{element:"#geoInfo",event:"click",handler:r.cleanGeo},{element:"div.message-tools .image-upload",event:"click",handler:i.getPicture}];e.bindEvents(a)},clearSendPopup:function(){$$("#messageText").val(""),$$("#uploadPicPreview>img").attr("src",""),$$("#uploadPicPreview").hide()},postMsg:function(){var n=$$("#messageText").val();if(e.getCharLength(n)<4){hiApp.alert(t.index.err_text_too_short);return}var r=$$("#uploadPicPreview>img").attr("src");r.length>4?i.startUpload(r):(hiApp.showPreloader(t.index.sending),setTimeout(function(){hiApp.hidePreloader(),hiApp.closeModal(".send-popup")},1300))}};return s}),define("view/contactView",["utils/appFunc","utils/tplManager"],function(e,t){var n={init:function(t){e.bindEvents(t.bindings)},beforeLoadContacts:function(){return $$(".contacts-list .list-group .contact-item").length>0?!1:(hiApp.showIndicator(),!0)},render:function(e){hiApp.initSearchbar(".contact-page"),setTimeout(function(){var n={contacts:e.contacts},r=t.renderTplById("contactListTemplate",n);$$("#contatcView .contacts-list ul").html(r),hiApp.hideIndicator()},500)},filterResult:function(e){$$(".contacts-list .list-group-title").each(function(){$$(this).next(".contact-item").css("display")==="none"&&$$(this).hide()})}};return n}),define("view/commentView",["utils/appFunc","i18n!nls/lang","utils/tplManager"],function(e,t,n){var r={init:function(t){e.bindEvents(t.bindings)},commentPopup:function(i){var s=[];s.cancel=t.global.cancel,s.comment=t.timeline.comment,s.send=t.global.send,i.name?(s.title=t.comment.reply_comment,s.placeholder=t.comment.reply+"@"+i.name+":"):(s.title=t.timeline.comment,s.placeholder=t.comment.placeholder);var o=n.renderTplById("commentPopupTemplate",s);hiApp.popup($$.trim(o));var u=[{element:"#commentBtn",event:"click",handler:r.sendComment}];e.bindEvents(u)},sendComment:function(){var n=$$("#commentText").val();if(e.getCharLength(n)<4)return hiApp.alert(t.index.err_text_too_short),!1;hiApp.showPreloader(t.comment.commenting),setTimeout(function(){hiApp.hidePreloader(),hiApp.closeModal(".comment-popup")},1500)},render:function(i){setTimeout(function(){var s={comments:i.comments,emptyComment:t.comment.empty_comment,rtime:function(){return e.timeFormat(this.time)}},o=n.renderTplById("commentsTemplate",s);$$("#commentContent").html(o);var u=[{element:"#commentContent .comment-item",event:"click",handler:r.createActionSheet}];e.bindEvents(u)},1500)},createActionSheet:function(){var e=$$(this).find(".comment-detail .name").html(),n=[{text:t.comment.reply_comment,bold:!0,onClick:function(){r.commentPopup({name:e})}},{text:t.comment.copy_comment,bold:!0}],i=[{text:t.global.cancel,color:"red"}],s=[n,i];hiApp.actions(s)}};return r}),define("view/messageView",["utils/appFunc","i18n!nls/lang","utils/tplManager"],function(e,t,n){var r=!1,i=[],s,o={init:function(t){i=t.answers,e.bindEvents(t.bindings);var n=t.query.nickname;$$(".chat-name").html(n),this.hideToolbar(),hiApp.showIndicator()},submitMessage:function(e){e.preventDefault();var t=$$(this).find(".ks-messages-input"),n=t.val();if(n.length===0)return;t.val(""),hiApp.addMessage({text:n,type:"sent",day:r?!1:"Today",time:r?!1:(new Date).getHours()+":"+(new Date).getMinutes()}),r=!0,s&&clearTimeout(s),s=setTimeout(function(){hiApp.addMessage({text:i[Math.floor(Math.random()*i.length)],type:"received"})},1e3)},triggerSubmit:function(){$$(".ks-messages-form").trigger("submit")},renderMessages:function(e){setTimeout(function(){var t={message:e},r=n.renderTplById("messageTemplate",t);$$('.page[data-page="message"] .messages').html(r),hiApp.hideIndicator()},600)},i18next:function(e){var r=[];r.chat=t.chat.title,r.chatPlaceholder=t.chat.chatPlaceholder,r.send=t.global.send;var i=n.renderTpl(e,r);return i},hideToolbar:function(){e.hideToolbar(".views")}};return o}),define("view/languageView",["utils/appFunc","i18n!nls/lang","utils/tplManager"],function(e,t,n){var r={init:function(t){e.bindEvents(t.bindings),this.setDefaultLanguage(),e.hideToolbar(".views");var n=t.query.from;if(n==="setting"){var i=[{element:".back2language",event:"click",handler:r.showToolbar}];e.bindEvents(i)}},setDefaultLanguage:function(){var e=this.getLanguage();e=e||"en-us",$$('.language-page .language-radio[data-lang="'+e+'"]').attr("checked","checked")},switchLanguage:function(){var e=$$(".language-page .language-radio:checked").data("lang");r.setLanguage(e),window.location.reload()},i18next:function(e){var r=[];r.back=t.global.back,r.done=t.global.done,r.switchLanguage=t.global.switch_language;var i=n.renderTpl(e,r);return i},getLanguage:function(){return localStorage.getItem("lang")},setLanguage:function(e){localStorage.setItem("lang",e)},showToolbar:function(){e.showToolbar(".views")}};return r}),define("view/module",["view/appView","view/loginView","view/settingView","view/aboutView","view/feedbackView","view/timelineView","view/itemView","view/postView","view/contactView","view/commentView","view/messageView","view/languageView"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h={module:function(h){var p;switch(h){case"appView":p=e;break;case"loginView":p=t;break;case"settingView":p=n;break;case"aboutView":p=r;break;case"feedbackView":p=i;break;case"timelineView":p=s;break;case"itemView":p=o;break;case"postView":p=u;break;case"contactView":p=a;break;case"commentView":p=f;break;case"messageView":p=l;break;case"languageView":p=c}return p}};return h}),define("controller/appCtrl",["utils/appFunc","view/module"],function(e,t){var n={i18next:function(e,n){var r=t.module(e).i18next(n);return r},bindEven:function(){var n=[{element:document,selector:"div.item-image>img",event:"click",handler:t.module("appView").photoBrowser}];e.bindEvents(n)},showToolbar:function(){e.showToolbar(".views")}};return n.bindEven(),n}),define("controller/loginCtrl",["utils/appFunc","utils/xhr","view/module","GS","i18n!nls/lang"],function(e,t,n,r,i){var s={init:function(){var e=[{element:".login-submit",event:"click",handler:s.loginSubmit}];n.module("loginView").init({bindings:e})},loginSubmit:function(){var n=$$("input.login-name").val(),s=$$("input.password").val();n===""||s===""?hiApp.alert(i.login.err_empty_input):e.isEmail(n)?(hiApp.showPreloader(i.login.login),t.simpleCall({func:"user_login",data:{loginname:n,password:s}},function(e){setTimeout(function(){if(e.err_code===0){var t=e.data;r.setCurrentUser(t.sid,t.user),mainView.loadPage("index.html"),hiApp.hidePreloader()}else hiApp.hidePreloader(),hiApp.alert(e.err_msg)},500)})):hiApp.alert(i.login.err_illegal_email)}};return s}),define("controller/settingCtrl",["utils/appFunc","utils/xhr","view/module"],function(e,t,n){var r={init:function(){var e=[{element:"#settingView",event:"show",handler:r.renderSetting}];n.module("settingView").init({bindings:e})},renderSetting:function(){if($$("#settingView .page-content")[0])return;hiApp.showIndicator(),t.simpleCall({func:"user_login"},function(e){if(e.err_code===0){var t=e.data.user;n.module("settingView").renderSetting(t)}})}};return r}),define("controller/aboutCtrl",["utils/appFunc","view/module"],function(e,t){var n={init:function(){var e=[{element:".back2setting",event:"click",handler:t.module("appView").showToolbar}];t.module("aboutView").init({bindings:e})}};return n}),define("controller/feedbackCtrl",["utils/appFunc","view/module"],function(e,t){var n={init:function(){var e=[{element:".back2setting",event:"click",handler:t.module("appView").showToolbar},{element:".send-feedback",event:"click",handler:n.sendFeedback}];t.module("feedbackView").init({bindings:e})},sendFeedback:function(){t.module("feedbackView").sendFeedback()}};return n}),define("controller/timelineCtrl",["utils/appFunc","utils/xhr","view/module"],function(e,t,n){var r={init:function(){n.module("timelineView").init(),this.getTimeline()},bindEvent:function(){var t=[{element:"#ourView",selector:".pull-to-refresh-content",event:"refresh",handler:r.refreshTimeline},{element:"#ourView",selector:".pull-to-refresh-content",event:"infinite",handler:r.infiniteTimeline},{element:"#ourView",selector:".refresh-click",event:"click",handler:n.module("timelineView").refreshTimelineByClick},{element:document,selector:"a.open-send-popup",event:"click",handler:n.module("postView").openSendPopup},{element:"#ourView",selector:".time-line-content .item-content .click-content",event:"click",handler:n.module("timelineView").openItemPage}];e.bindEvents(t)},getTimeline:function(){t.simpleCall({func:"timeline"},function(e){n.module("timelineView").getTimeline(e.data)})},refreshTimeline:function(){t.simpleCall({func:"refresh_timeline"},function(e){n.module("timelineView").refreshTimeline(e.data)})},infiniteTimeline:function(){var e=$$(this);t.simpleCall({func:"more_timeline"},function(t){n.module("timelineView").infiniteTimeline({data:t.data,$dom:e})})}};return r.bindEvent(),r}),define("controller/itemCtrl",["utils/appFunc","view/module"],function(e,t){var n={init:function(e){var n=[{element:".back2home",event:"click",handler:t.module("appView").showToolbar}];t.module("itemView").init({bindings:n,query:e})}};return n}),define("controller/postCtrl",["utils/appFunc","utils/xhr","view/module","i18n!nls/lang"],function(e,t,n,r){var i={bindEvent:function(){var t=[{element:".send-popup",event:"open",handler:n.module("postView").clearSendPopup},{element:document,selector:"#uploadPicPreview>img",event:"click",handler:i.clearChosenImage}];e.bindEvents(t)},clearChosenImage:function(){hiApp.confirm(r.camera.confirm_clear_image,function(){$$("#uploadPicPreview>img").attr("src",""),$$("#uploadPicPreview").hide(),localStorage.removeItem("imageUrl")})}};return i.bindEvent(),i}),define("controller/contactCtrl",["utils/appFunc","utils/xhr","view/module"],function(e,t,n){var r={init:function(){var e=[{element:"#contatcView",event:"show",handler:r.loadContacts},{element:"#contatcView .contact-page",event:"search",handler:n.module("contactView").filterResult}];n.module("contactView").init({bindings:e})},loadContacts:function(){n.module("contactView").beforeLoadContacts()&&t.simpleCall({query:{callback:"?"},func:"contacts"},function(e){e.err_code===0&&n.module("contactView").render({contacts:e.data})})}};return r}),define("controller/commentCtrl",["utils/appFunc","utils/xhr","view/module"],function(e,t,n){var r={init:function(){var e=[{element:".item-comment-btn",event:"click",handler:n.module("commentView").commentPopup}];n.module("commentView").init({bindings:e}),this.getComments()},getComments:function(){t.simpleCall({func:"comments"},function(e){if(e.err_code===0){var t=Math.floor(Math.random()*2);t||(e.data=null),n.module("commentView").render({comments:e.data})}})}};return r}),define("controller/messageCtrl",["utils/appFunc","utils/xhr","view/module"],function(e,t,n){var r={init:function(e){t.simpleCall({func:"answers"},function(t){if(t.err_code===0){var i=[{element:".back2contact",event:"click",handler:n.module("appView").showToolbar},{element:".ks-messages-form",event:"submit",handler:n.module("messageView").submitMessage},{element:".ks-send-message",event:"click",handler:n.module("messageView").triggerSubmit}];n.module("messageView").init({bindings:i,query:e,answers:t.data}),r.renderMessages()}})},renderMessages:function(){t.simpleCall({func:"message"},function(e){e.err_code===0&&n.module("messageView").renderMessages(e.data)})}};return r}),define("controller/languageCtrl",["utils/appFunc","view/module"],function(e,t){var n={init:function(e){var n=[{element:".set-language",event:"click",handler:t.module("languageView").switchLanguage}];t.module("languageView").init({bindings:n,query:e})}};return n}),define("controller/module",["controller/appCtrl","controller/loginCtrl","controller/settingCtrl","controller/aboutCtrl","controller/feedbackCtrl","controller/timelineCtrl","controller/itemCtrl","controller/postCtrl","controller/contactCtrl","controller/commentCtrl","controller/messageCtrl","controller/languageCtrl"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h={module:function(h){var p;switch(h){case"appCtrl":p=e;break;case"loginCtrl":p=t;break;case"settingCtrl":p=n;break;case"aboutCtrl":p=r;break;case"feedbackCtrl":p=i;break;case"timelineCtrl":p=s;break;case"itemCtrl":p=o;break;case"postCtrl":p=u;break;case"contactCtrl":p=a;break;case"commentCtrl":p=f;break;case"messageCtrl":p=l;break;case"languageCtrl":p=c}return p}};return h}),define("router",["GS","controller/module"],function(e,t){var n={init:function(){$$(document).on("pageBeforeInit",function(e){var t=e.detail.page;n.pageBeforeInit(t)}),$$(document).on("pageAfterAnimation",function(e){var t=e.detail.page;n.pageAfterAnimation(t)}),e.isLogin()?mainView.loadPage("index.html",!1):mainView.loadPage("page/login.html"),$$("div.views").removeClass("hidden-navbar")},pageAfterAnimation:function(e){var n=e.name,r=e.from,i=e.swipeBack;(n==="ourView"||n==="contatcView"||n==="setting")&&r==="left"&&i&&t.module("appCtrl").showToolbar()},pageBeforeInit:function(e){var n=e.name,r=e.query,i=e.from;switch(n){case"login":if(i==="left")return;t.module("loginCtrl").init();break;case"ourView":if(i==="left")return;t.module("timelineCtrl").init(),t.module("contactCtrl").init(),t.module("settingCtrl").init();break;case"about":t.module("aboutCtrl").init();break;case"feedback":t.module("feedbackCtrl").init();break;case"item":t.module("itemCtrl").init(r),t.module("commentCtrl").init();break;case"message":t.module("messageCtrl").init(r);break;case"language":t.module("languageCtrl").init(r)}},preprocess:function(e,n){if(!n)return!1;n=n.split("?")[0];var r;switch(n){case"index.html":r="appView";break;case"page/login.html":r="loginView";break;case"page/about.html":r="aboutView";break;case"page/feedback.html":r="feedbackView";break;case"page/item.html":r="itemView";break;case"page/message.html":r="messageView";break;case"page/language.html":r="languageView";break;default:return e}var i=t.module("appCtrl").i18next(r,e);return i}};return n}),function(){var e=localStorage.getItem("lang")||"en-us";require.config({locale:e,paths:{text:"../vendors/require/text",i18n:"../vendors/require/i18n",Framework7:"../vendors/framework7/framework7",mustache:"../vendors/mustache/mustache",GTPL:"../page/global.tpl.html",GS:"services/globalService"},shim:{Framework7:{exports:"Framework7"}}}),require(["Framework7","router","i18n!nls/lang","utils/appFunc"],function(e,t,n,r){var i={initialize:function(){this.bindEvents()},bindEvents:function(){r.isPhonegap()?document.addEventListener("deviceready",this.onDeviceReady,!1):window.onload=this.onDeviceReady()},onDeviceReady:function(){i.receivedEvent("deviceready")},receivedEvent:function(e){switch(e){case"deviceready":i.initMainView()}},initMainView:function(){window.$$=Dom7,window.hiApp=new e({pushState:!1,popupCloseByOutside:!1,animateNavBackIcon:!0,modalTitle:n.global.modal_title,modalButtonOk:n.global.modal_button_ok,modalButtonCancel:n.global.cancel,preprocess:t.preprocess}),window.mainView=hiApp.addView("#ourView",{dynamicNavbar:!0}),window.contatcView=hiApp.addView("#contatcView",{dynamicNavbar:!0}),window.settingView=hiApp.addView("#settingView",{dynamicNavbar:!0}),t.init()}};i.initialize()})}(),define("main",function(){});